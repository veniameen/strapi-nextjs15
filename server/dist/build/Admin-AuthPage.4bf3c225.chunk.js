"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[5826],{99498:(k,y,t)=>{t.d(y,{A:()=>P});var e=t(96540),a=t(83606);const P=()=>{const{changeLocale:M,localeNames:T,messages:v}=(0,e.useContext)(a.A);return{changeLocale:M,localeNames:T,messages:v}}},81594:(k,y,t)=>{t.d(y,{A:()=>T});var e=t(96540),a=t(40948),D=t(33878);const P=a.Ay.img`
  height: ${72/16}rem;
`,T=()=>{const{logos:{auth:v}}=(0,D.Bp)();return e.createElement(P,{src:v?.custom??v.default,"aria-hidden":!0,alt:""})}},37198:(k,y,t)=>{t.d(y,{VP:()=>ae,A1:()=>Y,Ay:()=>se});var e=t(96540),a=t(91616),D=t(98016),P=t(5556),M=t.n(P),T=t(40948),v=t(79054),te=t(6442),F=t(99498);const u=()=>{const{changeLocale:i,localeNames:q}=(0,F.A)(),{locale:Z}=(0,te.A)();return e.createElement(v.Z,{value:Z,onChange:n=>i(n)},Object.entries(q).map(([n,L])=>e.createElement(v.eY,{key:n,value:n},L)))},V=(0,T.Ay)(a.a)`
  margin: 0 auto;
  width: 552px;
`,ae=(0,T.Ay)(D.s)`
  flex-direction: column;
`,Y=({children:i})=>e.createElement(V,{shadow:"tableShadow",hasRadius:!0,paddingTop:9,paddingBottom:9,paddingLeft:10,paddingRight:10,background:"neutral0",justifyContent:"center"},i);Y.propTypes={children:M().node.isRequired};const X=({children:i})=>e.createElement("div",null,e.createElement(D.s,{as:"header",justifyContent:"flex-end"},e.createElement(a.a,{paddingTop:6,paddingRight:8},e.createElement(u,null))),e.createElement(a.a,{paddingTop:2,paddingBottom:11},i));X.propTypes={children:M().node.isRequired};const se=X},99507:(k,y,t)=>{t.d(y,{A:()=>P});var e=t(69118),a=t(40948);const P=(0,a.Ay)(e.T)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:M})=>M.colors.neutral600};
    }
  }
`},62093:(k,y,t)=>{t.d(y,{A:()=>C});var e=t(96540),a=t(30524),D=t(71808),P=t(91616),M=t(97939),T=t(98016),v=t(64200),te=t(90954),F=t(78320),ie=t(89376),u=t(29948),V=t(7425),ae=t(5556),Y=t.n(ae),X=t(6442),se=t(40948),i=t(81594),q=t(37198),Z=t(99507);const n=(0,se.Ay)(a.k)`
  ::-ms-reveal {
    display: none;
  }
`,L=({onSubmit:w,schema:W,children:$})=>{const[Q,ne]=(0,e.useState)(!1),{formatMessage:g}=(0,X.A)();return e.createElement(D.g,null,e.createElement(q.A1,null,e.createElement(V.l1,{enableReinitialize:!0,initialValues:{email:"",password:"",rememberMe:!1},onSubmit:w,validationSchema:W,validateOnChange:!1},({values:N,errors:b,handleChange:oe})=>e.createElement(F.lV,{noValidate:!0},e.createElement(q.VP,null,e.createElement(i.A,null),e.createElement(P.a,{paddingTop:6,paddingBottom:1},e.createElement(M.o,{variant:"alpha",as:"h1"},g({id:"Auth.form.welcome.title",defaultMessage:"Welcome!"}))),e.createElement(P.a,{paddingBottom:7},e.createElement(M.o,{variant:"epsilon",textColor:"neutral600"},g({id:"Auth.form.welcome.subtitle",defaultMessage:"Log in to your Strapi account"}))),b.errorMessage&&e.createElement(M.o,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},b.errorMessage)),e.createElement(T.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement(a.k,{error:b.email?g({id:b.email,defaultMessage:"This value is required."}):"",value:N.email,onChange:oe,label:g({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:g({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(n,{error:b.password?g({id:b.password,defaultMessage:"This value is required."}):"",onChange:oe,value:N.password,label:g({id:"global.password",defaultMessage:"Password"}),name:"password",type:Q?"text":"password",endAction:e.createElement(Z.A,{onClick:de=>{de.stopPropagation(),ne(pe=>!pe)},label:g(Q?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},Q?e.createElement(ie.A,null):e.createElement(u.A,null)),required:!0}),e.createElement(v.S,{onValueChange:de=>{oe({target:{value:de,name:"rememberMe"}})},value:N.rememberMe,"aria-label":"rememberMe",name:"rememberMe"},g({id:"Auth.form.rememberMe.label",defaultMessage:"Remember me"})),e.createElement(te.$,{fullWidth:!0,type:"submit"},g({id:"Auth.form.button.login",defaultMessage:"Login"}))))),$),e.createElement(T.s,{justifyContent:"center"},e.createElement(P.a,{paddingTop:4},e.createElement(F.N_,{to:"/auth/forgot-password"},g({id:"Auth.link.forgot-password",defaultMessage:"Forgot your password?"})))))};L.defaultProps={children:null,onSubmit(){}},L.propTypes={children:Y().node,onSubmit:Y().func,schema:Y().shape({type:Y().string.isRequired}).isRequired};const C=L},4899:(k,y,t)=>{t.r(y),t.d(y,{AuthPage:()=>he});var e=t(96540),a=t(78320),D=t(96275),P=t(84058),M=t.n(P),T=t(58156),v=t.n(T),te=t(90179),F=t.n(te),ie=t(5556),u=t.n(ie),V=t(56347),ae=t(60726),Y=t(99498),X=t(74090),se=t(14879),i=t(37198),q=t(62093);const Z=s=>e.createElement(i.Ay,null,e.createElement(q.A,{...s}));Z.defaultProps={onSubmit:s=>s.preventDefault()},Z.propTypes={onSubmit:u().func};var n=t(20627),L=t(71808),C=t(91616),w=t(97939),W=t(98016),$=t(30524),Q=t(90954),ne=t(7425),g=t(6442),N=t(81594);const b=({onSubmit:s,schema:h})=>{const{formatMessage:o}=(0,g.A)();return e.createElement(i.Ay,null,e.createElement(L.g,null,e.createElement(i.A1,null,e.createElement(ne.l1,{enableReinitialize:!0,initialValues:{email:""},onSubmit:s,validationSchema:h,validateOnChange:!1},({values:H,errors:U,handleChange:J})=>e.createElement(a.lV,{noValidate:!0},e.createElement(i.VP,null,e.createElement(N.A,null),e.createElement(C.a,{paddingTop:6,paddingBottom:7},e.createElement(w.o,{as:"h1",variant:"alpha"},o({id:"Auth.form.button.password-recovery",defaultMessage:"Password Recovery"}))),U.errorMessage&&e.createElement(w.o,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},o({id:U.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(W.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement($.k,{error:U.email?o({id:U.email,defaultMessage:"This email is invalid."}):"",value:H.email,onChange:J,label:o({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:o({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(Q.$,{type:"submit",fullWidth:!0},o({id:"Auth.form.button.forgot-password",defaultMessage:"Send Email"})))))),e.createElement(W.s,{justifyContent:"center"},e.createElement(C.a,{paddingTop:4},e.createElement(a.N_,{to:"/auth/login"},o({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};b.defaultProps={onSubmit:s=>s.preventDefault()},b.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};const oe=b,pe=()=>{const{formatMessage:s}=(0,g.A)();return e.createElement(i.Ay,null,e.createElement(L.g,null,e.createElement(i.A1,null,e.createElement(i.VP,null,e.createElement(N.A,null),e.createElement(C.a,{paddingTop:6,paddingBottom:7},e.createElement(w.o,{as:"h1",variant:"alpha"},s({id:"app.containers.AuthPage.ForgotPasswordSuccess.title",defaultMessage:"Email sent"}))),e.createElement(w.o,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.email",defaultMessage:"It can take a few minutes to receive your password recovery link."})),e.createElement(C.a,{paddingTop:4},e.createElement(w.o,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.contact-admin",defaultMessage:"If you do not receive this link, please contact your administrator."}))))),e.createElement(W.s,{justifyContent:"center"},e.createElement(C.a,{paddingTop:4},e.createElement(a.N_,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))},Le=()=>{const{formatMessage:s}=(0,g.A)(),o=(0,a.IT)().get("info")||s({id:"Auth.components.Oops.text",defaultMessage:"Your account has been suspended."});return e.createElement(i.Ay,null,e.createElement(L.g,null,e.createElement(i.A1,null,e.createElement(i.VP,null,e.createElement(N.A,null),e.createElement(C.a,{paddingTop:6,paddingBottom:7},e.createElement(w.o,{as:"h1",variant:"alpha"},s({id:"Auth.components.Oops.title",defaultMessage:"Oops..."}))),e.createElement(w.o,null,o),e.createElement(C.a,{paddingTop:4},e.createElement(w.o,null,s({id:"Auth.components.Oops.text.admin",defaultMessage:"If this is a mistake, please contact your administrator."}))))),e.createElement(W.s,{justifyContent:"center"},e.createElement(C.a,{paddingTop:4},e.createElement(a.N_,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))};var We=t(96630),ye=t(16473),Ue=t(64200),me=t(89376),ce=t(29948),fe=t(40948),ue=t(99507);const we=fe.Ay.a`
  color: ${({theme:s})=>s.colors.primary600};
`,Te=(0,fe.Ay)($.k)`
  ::-ms-reveal {
    display: none;
  }
`,ge=({authType:s,fieldsToDisable:h,noSignin:o,onSubmit:H,schema:U})=>{const J=(0,a.hN)(),{push:E}=(0,V.W6)(),[d,B]=(0,e.useState)(!1),[x,K]=(0,e.useState)(!1),[z,Ae]=(0,e.useState)(0),[re,_]=(0,e.useState)({}),{trackUsage:Ie}=(0,a.z1)(),{formatMessage:r}=(0,g.A)(),Pe=(0,a.IT)(),{formatAPIError:Me}=(0,a.wq)(),{get:le}=(0,a.ry)(),G=Pe.get("registrationToken");(0,e.useEffect)(()=>{G&&(async()=>{try{const{data:{data:l}}=await le("/admin/registration-info",{params:{registrationToken:G}});l&&_(l)}catch(l){const p=Me(l);J({type:"warning",message:p}),E(`/auth/oops?info=${encodeURIComponent(p)}`)}})()},[G]);function ve(O){return Object.entries(O).reduce((l,[p,I])=>{let R=I;return!["password","confirmPassword"].includes(p)&&typeof I=="string"&&(R=R.trim(),p==="lastname"&&(R=R||null)),l[p]=R,l},{})}return e.createElement(i.Ay,null,e.createElement(i.A1,null,e.createElement(ne.l1,{enableReinitialize:!0,initialValues:{firstname:re.firstname||"",lastname:re.lastname||"",email:re.email||"",password:"",confirmPassword:"",registrationToken:G||void 0,news:!1},onSubmit:async(O,l)=>{const p=ve(O);try{await U.validate(p,{abortEarly:!1}),z>0&&s==="register-admin"&&Ie("didSubmitWithErrorsFirstAdmin",{count:z.toString()}),H(G?{userInfo:F()(p,["registrationToken"]),registrationToken:G}:p,l)}catch(I){const R=(0,a.ed)(I);Ae(z+1),l.setErrors(R)}},validateOnChange:!1},({values:O,errors:l,handleChange:p})=>e.createElement(a.lV,{noValidate:!0},e.createElement(L.g,null,e.createElement(W.s,{direction:"column",alignItems:"center",gap:3},e.createElement(N.A,null),e.createElement(w.o,{as:"h1",variant:"alpha",textAlign:"center"},r({id:"Auth.form.welcome.title",defaultMessage:"Welcome to Strapi!"})),e.createElement(w.o,{variant:"epsilon",textColor:"neutral600",textAlign:"center"},r({id:"Auth.form.register.subtitle",defaultMessage:"Credentials are only used to authenticate in Strapi. All saved data will be stored in your database."}))),e.createElement(W.s,{direction:"column",alignItems:"stretch",gap:6,marginTop:7},e.createElement(We.x,{gap:4},e.createElement(ye.E,{col:6},e.createElement($.k,{name:"firstname",required:!0,value:O.firstname,error:l.firstname?r(l.firstname):void 0,onChange:p,label:r({id:"Auth.form.firstname.label",defaultMessage:"Firstname"})})),e.createElement(ye.E,{col:6},e.createElement($.k,{name:"lastname",value:O.lastname,onChange:p,label:r({id:"Auth.form.lastname.label",defaultMessage:"Lastname"})}))),e.createElement($.k,{name:"email",disabled:h.includes("email"),value:O.email,onChange:p,error:l.email?r(l.email):void 0,required:!0,label:r({id:"Auth.form.email.label",defaultMessage:"Email"}),type:"email"}),e.createElement(Te,{name:"password",onChange:p,value:O.password,error:l.password?r(l.password):void 0,endAction:e.createElement(ue.A,{onClick:I=>{I.preventDefault(),B(R=>!R)},label:r(d?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},d?e.createElement(me.A,null):e.createElement(ce.A,null)),hint:r({id:"Auth.form.password.hint",defaultMessage:"Must be at least 8 characters, 1 uppercase, 1 lowercase & 1 number"}),required:!0,label:r({id:"global.password",defaultMessage:"Password"}),type:d?"text":"password"}),e.createElement(Te,{name:"confirmPassword",onChange:p,value:O.confirmPassword,error:l.confirmPassword?r(l.confirmPassword):void 0,endAction:e.createElement(ue.A,{onClick:I=>{I.preventDefault(),K(R=>!R)},label:r(x?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},x?e.createElement(me.A,null):e.createElement(ce.A,null)),required:!0,label:r({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:x?"text":"password"}),e.createElement(Ue.S,{onValueChange:I=>{p({target:{value:I,name:"news"}})},value:O.news,name:"news","aria-label":"news"},r({id:"Auth.form.register.news.label",defaultMessage:"Keep me updated about new features & upcoming improvements (by doing this you accept the {terms} and the {policy})."},{terms:e.createElement(we,{target:"_blank",href:"https://strapi.io/terms",rel:"noreferrer"},r({id:"Auth.privacy-policy-agreement.terms",defaultMessage:"terms"})),policy:e.createElement(we,{target:"_blank",href:"https://strapi.io/privacy",rel:"noreferrer"},r({id:"Auth.privacy-policy-agreement.policy",defaultMessage:"policy"}))})),e.createElement(Q.$,{fullWidth:!0,size:"L",type:"submit"},r({id:"Auth.form.button.register",defaultMessage:"Let's start"})))))),!o&&e.createElement(C.a,{paddingTop:4},e.createElement(W.s,{justifyContent:"center"},e.createElement(a.N_,{label:"Auth.link.signin",to:"/auth/login"},r({id:"Auth.link.signin.account",defaultMessage:"Already have an account?"}))))))};ge.defaultProps={fieldsToDisable:[],noSignin:!1,onSubmit:s=>s.preventDefault()},ge.propTypes={authType:u().string.isRequired,fieldsToDisable:u().array,noSignin:u().bool,onSubmit:u().func,schema:u().shape({validate:u().func.isRequired,type:u().string.isRequired}).isRequired};const Ce=ge,Oe=(0,fe.Ay)($.k)`
  ::-ms-reveal {
    display: none;
  }
`,Ee=({onSubmit:s,schema:h})=>{const[o,H]=(0,e.useState)(!1),[U,J]=(0,e.useState)(!1),{formatMessage:E}=(0,g.A)();return e.createElement(i.Ay,null,e.createElement(L.g,null,e.createElement(i.A1,null,e.createElement(ne.l1,{enableReinitialize:!0,initialValues:{password:"",confirmPassword:""},onSubmit:s,validationSchema:h,validateOnChange:!1},({values:d,errors:B,handleChange:x})=>e.createElement(a.lV,{noValidate:!0},e.createElement(i.VP,null,e.createElement(N.A,null),e.createElement(C.a,{paddingTop:6,paddingBottom:7},e.createElement(w.o,{as:"h1",variant:"alpha"},E({id:"global.reset-password",defaultMessage:"Reset password"}))),B.errorMessage&&e.createElement(w.o,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},E({id:B.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(W.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement(Oe,{name:"password",onChange:x,value:d.password,error:B.password?E({id:B.password,defaultMessage:"This field is required."}):void 0,endAction:e.createElement(ue.A,{onClick:K=>{K.preventDefault(),H(z=>!z)},label:E(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},o?e.createElement(me.A,null):e.createElement(ce.A,null)),hint:E({id:"Auth.form.password.hint",defaultMessage:"Password must contain at least 8 characters, 1 uppercase, 1 lowercase and 1 number"}),required:!0,label:E({id:"global.password",defaultMessage:"Password"}),type:o?"text":"password"}),e.createElement(Oe,{name:"confirmPassword",onChange:x,value:d.confirmPassword,error:B.confirmPassword?E({id:B.confirmPassword,defaultMessage:"This value is required."}):void 0,endAction:e.createElement(ue.A,{onClick:K=>{K.preventDefault(),J(z=>!z)},label:E(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},U?e.createElement(me.A,null):e.createElement(ce.A,null)),required:!0,label:E({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:U?"text":"password"}),e.createElement(Q.$,{fullwidth:!0,type:"submit"},E({id:"global.change-password",defaultMessage:"Change password"})))))),e.createElement(W.s,{justifyContent:"center"},e.createElement(C.a,{paddingTop:4},e.createElement(a.N_,{to:"/auth/login"},E({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};Ee.defaultProps={onSubmit:s=>s.preventDefault()},Ee.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};const Be=Ee,Re={"forgot-password":{Component:oe,endPoint:"forgot-password",fieldsToDisable:[],fieldsToOmit:[],schema:n.Ik().shape({email:n.Yj().email(a.iW.email).required(a.iW.required)}),inputsPrefix:""},"forgot-password-success":{Component:pe,endPoint:"",fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},login:{endPoint:"login",fieldsToDisable:[],fieldsToOmit:["rememberMe"],schema:n.Ik().shape({email:n.Yj().email(a.iW.email).required(a.iW.required),password:n.Yj().required(a.iW.required),rememberMe:n.lc().nullable()}),inputsPrefix:""},oops:{Component:Le,endPoint:null,fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},register:{Component:Ce,endPoint:"register",fieldsToDisable:["email"],fieldsToOmit:["userInfo.confirmPassword","userInfo.news","userInfo.email"],schema:n.Ik().shape({firstname:n.Yj().trim().required(a.iW.required),lastname:n.Yj().nullable(),password:n.Yj().min(8,a.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.iW.required),confirmPassword:n.Yj().oneOf([n.KR("password"),null],"components.Input.error.password.noMatch").required(a.iW.required),registrationToken:n.Yj().required(a.iW.required)}),inputsPrefix:"userInfo."},"register-admin":{Component:Ce,endPoint:"register-admin",noSignin:!0,fieldsToDisable:[],fieldsToOmit:["confirmPassword","news"],schema:n.Ik().shape({firstname:n.Yj().trim().required(a.iW.required),lastname:n.Yj().nullable(),password:n.Yj().min(8,a.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.iW.required),email:n.Yj().email(a.iW.email).strict().lowercase(a.iW.lowercase).required(a.iW.required),confirmPassword:n.Yj().oneOf([n.KR("password"),null],"components.Input.error.password.noMatch").required(a.iW.required)}),inputsPrefix:""},"reset-password":{Component:Be,endPoint:"reset-password",fieldsToDisable:[],fieldsToOmit:["confirmPassword"],schema:n.Ik().shape({password:n.Yj().min(8,a.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.iW.required),confirmPassword:n.Yj().oneOf([n.KR("password"),null],"components.Input.error.password.noMatch").required(a.iW.required)})}},be=s=>s;var xe=t(41261),Ke=t(63560),je=t.n(Ke);const De={formErrors:{},modifiedData:{},requestError:null},Fe=(s,h)=>(0,xe.Ay)(s,o=>{switch(h.type){case"ON_CHANGE":{je()(o.modifiedData,h.keys.split("."),h.value);break}case"RESET_PROPS":return De;case"SET_DATA":{o.modifiedData=h.data;break}case"SET_ERRORS":{o.formErrors=h.errors;break}case"SET_REQUEST_ERROR":{o.requestError={errorMessage:h.errorMessage,errorStatus:h.errorStatus};break}default:return o}}),he=({hasAdmin:s,setHasAdmin:h})=>{const{push:o,location:{search:H}}=(0,V.W6)(),{changeLocale:U}=(0,Y.A)(),{setSkipped:J}=(0,a.Cx)(),{trackUsage:E}=(0,a.z1)(),{params:{authType:d}}=(0,V.W5)("/auth/:authType"),B=(0,a.IT)(),x=(0,X.h)(Z,async()=>(await t.e(6737).then(t.bind(t,26737))).LoginEE),K=(0,X.h)(Re,async()=>(await t.e(1212).then(t.bind(t,11212))).FORMS,{combine(m,f){return{...m,...f}},defaultValue:Re}),[{formErrors:z,modifiedData:Ae,requestError:re},_]=(0,e.useReducer)(Fe,De,be),r=D.A.CancelToken.source(),{endPoint:Pe,fieldsToDisable:Me,fieldsToOmit:le,inputsPrefix:G,schema:ve,...O}=K?.[d]??{};(0,e.useEffect)(()=>()=>{r.cancel("Component unmounted")},[]);const{post:l}=(0,a.ry)();(0,e.useEffect)(()=>{_({type:"RESET_PROPS"})},[d]);const p=({target:{name:m,value:f}})=>{_({type:"ON_CHANGE",keys:m,value:f})},I=async(m,{setSubmitting:f,setErrors:S})=>{f(!0);const j=F()(m,le),c=`/admin/${Pe}`;d==="login"&&await Ve(m,c,{setSubmitting:f,setErrors:S}),(d==="register"||d==="register-admin")&&await Ye(m,c,{setSubmitting:f,setErrors:S}),d==="forgot-password"&&await R(j,c,{setSubmitting:f,setErrors:S}),d==="reset-password"&&await Ne(j,c,{setSubmitting:f,setErrors:S})},R=async(m,f,{setSubmitting:S,setErrors:j})=>{try{await l(f,m,{cancelToken:r.token}),o("/auth/forgot-password-success")}catch(c){console.error(c),j({errorMessage:"notification.error"})}finally{S(!1)}},Ve=async(m,f,{setSubmitting:S,setErrors:j})=>{try{const{data:{data:{token:c,user:A}}}=await l(f,F()(m,le),{cancelToken:r.token});A.preferedLanguage&&U(A.preferedLanguage),a.j2.setToken(c,m.rememberMe),a.j2.setUserInfo(A,m.rememberMe),Se()}catch(c){if(c.response){const A=v()(c,["response","data","error","message"],"Something went wrong");if(M()(A).toLowerCase()==="usernotactive"){o("/auth/oops"),_({type:"RESET_PROPS"});return}j({errorMessage:A})}}finally{S(!1)}},Ye=async(m,f,{setSubmitting:S,setErrors:j})=>{try{E("willCreateFirstAdmin");const{data:{data:{token:c,user:A}}}=await l(f,F()(m,le),{cancelToken:r.token});a.j2.setToken(c,!1),a.j2.setUserInfo(A,!1),S(!1),h(!0);const{roles:ee}=A;if(ee&&ee.find(({code:$e})=>$e==="strapi-super-admin")&&(ae.Ay.setSkipped(!1),J(!1),E("didLaunchGuidedtour")),d==="register"&&m.userInfo.news===!0||d==="register-admin"&&m.news===!0){o({pathname:"/usecase",search:`?hasAdmin=${s}`});return}Se()}catch(c){if(E("didNotCreateFirstAdmin"),c.response){const{data:A}=c.response,ee=(0,se.N)(A);j({apiErrors:ee})}}},Ne=async(m,f,{setErrors:S,setSubmitting:j})=>{try{const{data:{data:{token:c,user:A}}}=await l(f,{...m,resetPasswordToken:B.get("code")},{cancelToken:r.token});a.j2.setToken(c,!1),a.j2.setUserInfo(A,!1),o("/")}catch(c){if(c.response){const A=v()(c,["response","data","message"],"Something went wrong"),ee=v()(c,["response","data","statusCode"],400);_({type:"SET_REQUEST_ERROR",errorMessage:A,errorStatus:ee}),S({errorMessage:A})}}finally{j(!1)}},Se=()=>{if(d==="login"){const m=B.get("redirectTo"),f=m?decodeURIComponent(m):"/";o(f)}else o("/")};if(!K[d]||s&&d==="register-admin"||a.j2.getToken())return e.createElement(V.rd,{to:"/"});if(!s&&d!=="register-admin")return e.createElement(V.rd,{to:{pathname:"/auth/register-admin",search:H}});if(x&&(K.login.Component=x),!x)return null;const{Component:ze}=K?.[d]??{};return e.createElement(ze,{...O,authType:d,fieldsToDisable:Me,formErrors:z,inputsPrefix:G,modifiedData:Ae,onChange:p,onSubmit:I,requestError:re,schema:ve})};he.defaultProps={hasAdmin:!1},he.propTypes={hasAdmin:u().bool,setHasAdmin:u().func.isRequired}},71808:(k,y,t)=>{t.d(y,{g:()=>M});var e=t(74848),a=t(40948),D=t(91616);const P=(0,a.Ay)(D.a)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,M=({labelledBy:T="main-content-title",...v})=>(0,e.jsx)(P,{"aria-labelledby":T,as:"main",id:"main-content",tabIndex:-1,...v})}}]);
