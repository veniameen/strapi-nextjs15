(self.webpackChunkserver=self.webpackChunkserver||[]).push([[7101],{52002:(ie,H,n)=>{"use strict";n.d(H,{A:()=>Xe});var t=n(96540),k=n(91616),y=n(78320),Z=n(42092),B=n(45581),j=n(74848);const N=Q=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...Q,children:[(0,j.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#4945FF",stroke:"#4945FF",rx:2.5}),(0,j.jsx)("path",{fill:"#fff",d:"M15.328 10.54h1.723c.012-.089.012-.165.012-.253 0-1.676-1.471-2.959-3.41-2.959-2.696 0-4.647 2.22-4.647 5.344 0 2.15 1.383 3.545 3.504 3.545 2.045 0 3.597-1.154 3.967-2.936h-1.752c-.276.826-1.102 1.371-2.063 1.371-1.137 0-1.846-.802-1.846-2.103 0-2.08 1.19-3.65 2.725-3.65 1.037 0 1.746.62 1.787 1.558v.082ZM21.053 16l1.488-6.943h2.531l.31-1.512H18.54l-.31 1.512h2.53L19.272 16h1.782Z"})]}),ae=N;var re=n(39770),xe=n(12377),Ge=n(4182),qe=n(97145),je=n(95190),$=n(35157),ye=n(59203);const J=Q=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...Q,children:[(0,j.jsx)("path",{fill:"#FDF4DC",stroke:"#FAE7B9",d:"M.5 3A2.5 2.5 0 0 1 3 .5h26A2.5 2.5 0 0 1 31.5 3v18a2.5 2.5 0 0 1-2.5 2.5H3A2.5 2.5 0 0 1 .5 21V3Z"}),(0,j.jsx)("path",{fill:"#D9822F",d:"M20.158 11.995c0-.591-.463-1.073-1.045-1.11H13.53V9.245a2.05 2.05 0 0 1 2.046-2.049c1.13 0 2.048.784 2.049 1.913 0 .24.194.433.433.433h.33a.433.433 0 0 0 .433-.433C18.82 7.32 17.365 5.999 15.577 6a3.246 3.246 0 0 0-3.241 3.244v1.642h-.223c-.615 0-1.113.499-1.113 1.114v4.887c.001.615.5 1.113 1.115 1.113l6.93-.003c.616 0 1.114-.5 1.114-1.115l-.001-4.887Z"})]}),Ce=J;var L=n(65933);const z=Q=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...Q,children:[(0,j.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#EAF5FF",stroke:"#B8E1FF",rx:2.5}),(0,j.jsx)("path",{fill:"#0C75AF",fillRule:"evenodd",d:"M19.286 9.286v-.857a.397.397 0 0 0-.138-.302A.465.465 0 0 0 18.82 8h-8.357a.465.465 0 0 0-.326.127.397.397 0 0 0-.138.302v.857c0 .116.046.216.138.301.092.085.2.127.326.127h8.357a.465.465 0 0 0 .327-.127.397.397 0 0 0 .138-.301Zm2.785 2.713v.857a.397.397 0 0 1-.137.301.465.465 0 0 1-.327.128H10.464a.465.465 0 0 1-.326-.128.397.397 0 0 1-.138-.301v-.857c0-.116.046-.217.138-.302a.465.465 0 0 1 .326-.127h11.143c.126 0 .235.043.327.127a.397.397 0 0 1 .137.302Zm-1.857 3.574v.857a.397.397 0 0 1-.137.302.465.465 0 0 1-.327.127h-9.286a.465.465 0 0 1-.326-.127.397.397 0 0 1-.138-.302v-.857c0-.116.046-.216.138-.301a.465.465 0 0 1 .326-.127h9.286c.126 0 .235.042.326.127a.397.397 0 0 1 .138.301Z",clipRule:"evenodd"})]}),Le=z,ue=Q=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 24",...Q,children:[(0,j.jsx)("rect",{width:31,height:23,x:.5,y:.5,fill:"#0C75AF",stroke:"#0C75AF",rx:2.5}),(0,j.jsx)("path",{fill:"#fff",d:"M8.523 13.586c.106 1.64 1.418 2.63 3.34 2.63 2.098 0 3.516-1.113 3.516-2.788 0-1.143-.65-1.846-2.086-2.297l-.867-.27c-.797-.252-1.137-.597-1.137-1.066 0-.598.633-1.031 1.459-1.031.873 0 1.512.474 1.617 1.183h1.67c-.053-1.54-1.36-2.619-3.217-2.619-1.91 0-3.328 1.131-3.328 2.678 0 1.09.715 1.922 1.963 2.309l.879.275c.914.287 1.266.592 1.266 1.084 0 .662-.657 1.107-1.606 1.107-.914 0-1.635-.469-1.758-1.195h-1.71ZM20.107 16l1.489-6.943h2.531l.31-1.512h-6.843l-.31 1.512h2.53L18.326 16h1.781Z"})]}),me=ue;var Fe=n(73034),Ke=n(42391),he=n(5556),Se=n.n(he),Ee=n(40948);const $e={biginteger:Z.A,boolean:B.A,collectionType:ae,component:re.A,contentType:ae,date:xe.A,datetime:xe.A,decimal:Z.A,dynamiczone:Ge.A,email:qe.A,enum:je.A,enumeration:je.A,file:$.A,files:$.A,float:Z.A,integer:Z.A,json:ye.A,JSON:ye.A,media:$.A,number:Z.A,password:Ce,relation:L.A,richtext:Le,singleType:me,string:Fe.A,text:Fe.A,time:xe.A,timestamp:xe.A,uid:Ke.A},c=(0,Ee.Ay)(k.a)`
  svg {
    height: 100%;
    width: 100%;
  }
`,_e=({type:Q,customField:Pe,...G})=>{const Dt=(0,y.AC)();let we=$e[Q];if(Pe){const{icon:dt}=Dt.get(Pe);dt&&(we=dt)}return $e[Q]?t.createElement(c,{height:(0,y.a8)(24),width:(0,y.a8)(32),shrink:0,...G,"aria-hidden":!0},t.createElement(k.a,{as:we})):null};_e.defaultProps={customField:null},_e.propTypes={type:Se().string.isRequired,customField:Se().string};const Xe=_e},45492:(ie,H,n)=>{"use strict";n.d(H,{z:()=>Wn});var t=n(58842),k=n(99873),y=n(82543),Z=n(8872),B=n(40009),j=n(65648),N=n(36045),ae=n(33324),re=n(94404),xe=n(6702),Ge=n(27220),qe=n(27441),je=n(70709),$=n(46741),ye=n(28283),J=n(74555),Ce=n(9298),L=n(68311),z=n(2137),Le=n(37283),ue=n(26437),me=n(6987),Fe=n(53308),Ke=n(64356),he=n(29754),Se=n(62806),Ee=n(76600),$e=n(41174),c=n(64395),_e=n(45958),Xe=n(10204),Q=n(82721),Pe=n(99855),G=n(54101),Dt=n(40036),we=n(13595),dt=n(41814),qt=n(82969),_t=n(11668),D=n(72753),Xt=n(4624),Jt=n(52989),Qt=n(38089),Pt=n(89376),wt=n(70958),en=n(17779),tn=n(11285),s=n(44109),Be=n(30195),nn=n(94885),an=n(46966),ze=n(2783),sn=n(32276),xt=n(92573),Lt=n(4038),Ve=n(30505),ct=n(26983),Ze=n(32889),on=n(27253),X=n(74907),rn=n(72673),ln=n(37426),dn=n(97060),It=n(94676),Ea=n(78275),Ft=n(9990),va=n(11373),ut=n(82366),St=n(23242),cn=n(97328),mt=n(47031),un=n(16334),pt=n(17442),gt=n(95274),et=n(72265),tt=n(60283),Ma=n(30316),Bt=n(13170),ft=n(4295),mn=n(98846),ba=n(62122),Nt=n(95937),Ut=n(84513),pn=n(62881),gn=n(46748),Wt=n(34757),fn=n(68279),Je=n(74306),yn=n(5830),hn=n(82139),An=n(37259),En=n(68433),vn=n(6194),Mn=n(69153),bn=n(81813),Tn=n(14481),Ta=n(4998),Cn=n(84061),Ca=n(25997),Rn=n(13354),jt=n(89506),On=n(99525),nt=n(42720),at=n(52830),yt=n(84532),Dn=n(61497),Kt=n(3707),Pn=n(95373),ht=n(64133),At=n(93285),$t=n(74264),xn=n(58946),zt=n(72851),Et=n(46181),Ln=n(69021),vt=n(27796),In=n(13623),Vt=n(82390),Fn=n(23936),Mt=n(91425),Sn=n(26742),bt=n(77326),Bn=n(17882),Zt=n(77808),Nn=n(57281),Un=n(33566);const Wn={alien:t.A,apps:k.A,archive:y.A,arrowDown:Z.A,arrowLeft:B.A,arrowRight:j.A,arrowUp:N.A,attachment:ae.A,bell:re.A,bold:xe.A,book:Ge.A,briefcase:qe.A,brush:je.A,bulletList:$.A,calendar:ye.A,car:J.A,cast:Ce.A,chartBubble:L.A,chartCircle:z.A,chartPie:Le.A,check:ue.A,clock:me.A,cloud:Fe.A,code:Ke.A,cog:he.A,collapse:Se.A,command:Ee.A,connector:$e.A,crop:c.A,crown:_e.A,cube:Xe.A,cup:Q.A,cursor:Pe.A,dashboard:G.A,database:Dt.A,discuss:we.A,doctor:dt.A,earth:qt.A,emotionHappy:_t.A,emotionUnhappy:D.A,envelop:Xt.A,exit:Jt.A,expand:Qt.A,eye:Pt.A,feather:wt.A,file:en.A,fileError:tn.A,filePdf:s.A,filter:Be.A,folder:nn.A,gate:an.A,gift:ze.A,globe:sn.A,grid:xt.A,handHeart:Lt.A,hashtag:Ve.A,headphone:ct.A,heart:Ze.A,house:on.A,information:X.A,italic:rn.A,key:ln.A,landscape:dn.A,layer:It.A,layout:Ea.A,lightbulb:Ft.A,link:va.A,lock:ut.A,magic:St.A,manyToMany:cn.A,manyToOne:mt.A,manyWays:un.A,medium:pt.A,message:gt.A,microphone:et.A,monitor:tt.A,moon:Ma.A,music:Bt.A,oneToMany:ft.A,oneToOne:mn.A,oneWay:ba.A,paint:Nt.A,paintBrush:Ut.A,paperPlane:pn.A,pencil:gn.A,phone:Wt.A,picture:fn.A,pin:Je.A,pinMap:yn.A,plane:hn.A,play:An.A,plus:En.A,priceTag:vn.A,puzzle:Mn.A,question:bn.A,quote:Tn.A,repeat:Ta.A,restaurant:Cn.A,rocket:Ca.A,rotate:Rn.A,scissors:jt.A,search:On.A,seed:nt.A,server:at.A,shield:yt.A,shirt:Dn.A,shoppingCart:Kt.A,slideshow:Pn.A,stack:ht.A,star:At.A,store:$t.A,strikeThrough:xn.A,sun:zt.A,television:Et.A,thumbDown:Ln.A,thumbUp:vt.A,train:In.A,twitter:Vt.A,typhoon:Fn.A,underline:Mt.A,user:Sn.A,volumeMute:bt.A,volumeUp:Bn.A,walk:Zt.A,wheelchair:Nn.A,write:Un.A}},56587:(ie,H,n)=>{"use strict";n.d(H,{A:()=>y});var t=n(96540);const y=(0,t.createContext)()},58329:(ie,H,n)=>{"use strict";n.d(H,{A:()=>y});var t=n(96540);const y=(0,t.createContext)()},44033:(ie,H,n)=>{"use strict";n.d(H,{A:()=>Z});var t=n(96540),k=n(56587);const Z=()=>(0,t.useContext)(k.A)},65387:(ie,H,n)=>{"use strict";n.d(H,{A:()=>Z});var t=n(96540),k=n(58329);const Z=()=>(0,t.useContext)(k.A)},90056:(ie,H,n)=>{"use strict";n.r(H),n.d(H,{default:()=>Zo});var t=n(96540),k=n(63214),y=n(78320),Z=n(68154),B=n(6442),j=n(56347),N=n(91616),ae=n(4800),re=n(41240),xe=n(41175),Ge=n(77507),qe=n(96491),je=n(30950),$=n(74848),ye=n(77044),J=n(40948),Ce=n(28618),L=n(98016),z=n(97939);const Le=(0,J.Ay)(N.a)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
    }
  }
`,ue=J.Ay.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`,me=J.Ay.div`
  display: flex;
  align-items: center;
  width: ${12/16}rem;
  transform: rotateX(${({rotated:e})=>e?"0deg":"180deg"});
`,Fe=({label:e,children:a,id:o})=>{const[r,i]=(0,t.useState)(!0),d=(0,Ce.B)(o);return(0,$.jsxs)(N.a,{children:[(0,$.jsx)(Le,{paddingLeft:7,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,$.jsx)(L.s,{justifyContent:"space-between",children:(0,$.jsxs)(ue,{onClick:()=>{i(l=>!l)},"aria-expanded":r,"aria-controls":d,children:[(0,$.jsx)(me,{rotated:r,children:(0,$.jsx)(ye.A,{"aria-hidden":!0})}),(0,$.jsx)(N.a,{paddingLeft:2,children:(0,$.jsx)(z.o,{as:"span",fontWeight:"semiBold",textColor:"neutral800",children:e})})]})})}),r&&(0,$.jsx)("ul",{id:d,children:t.Children.map(a,(l,u)=>(0,$.jsx)("li",{children:l},u))})]})};var Ke=n(10855),he=n(68433),Se=n(55808),Ee=n.n(Se),$e=n(54625),c=n(45489),_e=n(2404),Xe=n.n(_e),Q=n(44033),Pe=n(65387),G=n(69284);const we=()=>{const{components:e,componentsGroupedByCategory:a,contentTypes:o,isInDevelopmentMode:r,sortedContentTypesList:i,modifiedData:d,initialData:l}=(0,Q.A)(),u=(0,y.hN)(),{trackUsage:m}=(0,y.z1)(),[f,g]=(0,t.useState)(""),{onOpenModalCreateSchema:p,onOpenModalEditCategory:T}=(0,Pe.A)(),{locale:b}=(0,B.A)(),{startsWith:v}=(0,y.U2)(b,{sensitivity:"base"}),R=(0,y.QM)(b,{sensitivity:"base"}),F=!Object.keys(o).some(U=>o[U].isTemporary===!0)&&!Object.keys(e).some(U=>e[U].isTemporary===!0)&&Xe()(d,l),M=()=>{F?(m("willCreateContentType"),p({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):S()},P=()=>{F?(m("willCreateSingleType"),p({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):S()},I=()=>{F?(m("willCreateComponent"),p({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):S()},S=()=>{u({type:"info",message:{id:(0,c.A)("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"}})},q=Object.entries(a).map(([U,Ae])=>({name:U,title:U,isEditable:r,onClickEdit(_,Me){_.stopPropagation(),F?T(Me.name):S()},links:Ae.map(_=>({name:_.uid,to:`/plugins/${G.A}/component-categories/${U}/${_.uid}`,title:_.schema.displayName})).sort((_,Me)=>R.compare(_.title,Me.title))})).sort((U,Ae)=>R.compare(U.title,Ae.title)),de=i.filter(U=>U.visible);return{menu:[{name:"models",title:{id:`${(0,c.A)("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:r&&{id:`${(0,c.A)("button.model.create")}`,defaultMessage:"Create new collection type",onClick:M},links:de.filter(U=>U.kind==="collectionType")},{name:"singleTypes",title:{id:`${(0,c.A)("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:r&&{id:`${(0,c.A)("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:P},links:de.filter(U=>U.kind==="singleType")},{name:"components",title:{id:`${(0,c.A)("menu.section.components.name")}`,defaultMessage:"Components"},customLink:r&&{id:`${(0,c.A)("button.component.create")}`,defaultMessage:"Create a new component",onClick:I},links:q}].map(U=>U.links.some(_=>Array.isArray(_.links))?{...U,links:U.links.map(_=>{const Me=_.links.filter(te=>v(te.title,f));return Me.length===0?null:{..._,links:Me.sort((te,ee)=>R.compare(te.title,ee.title))}}).filter(Boolean)}:{...U,links:U.links.filter(_=>v(_.title,f)).sort((_,Me)=>R.compare(_.title,Me.title))}),searchValue:f,onSearchChange:g}},qt=()=>{const{menu:e,searchValue:a,onSearchChange:o}=we(),{formatMessage:r}=(0,B.A)();return t.createElement(xe.C,{ariaLabel:r({id:`${(0,c.A)("plugin.name")}`,defaultMessage:"Content-Types Builder"})},t.createElement(Ge.X,{searchable:!0,value:a,onClear:()=>o(""),onChange:i=>o(i.target.value),label:r({id:`${(0,c.A)("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:r({id:"global.search",defaultMessage:"Search"})}),t.createElement(qe.w,null,e.map(i=>t.createElement(t.Fragment,{key:i.name},t.createElement(je.L,{label:r({id:i.title.id,defaultMessage:i.title.defaultMessage}),collapsable:!0,badgeLabel:i.links.length.toString()},i.links.map(d=>d.links?t.createElement(Fe,{key:d.name,label:Ee()(d.title)},d.links.map(l=>t.createElement(Ke.u,{as:$e.k2,to:l.to,active:l.active,key:l.name,isSubSectionChild:!0},Ee()(r({id:l.name,defaultMessage:l.title}))))):t.createElement(Ke.u,{as:$e.k2,to:d.to,active:d.active,key:d.name},Ee()(r({id:d.name,defaultMessage:d.title}))))),i.customLink&&t.createElement(N.a,{paddingLeft:7},t.createElement(ae.Q,{onClick:i.customLink.onClick,startIcon:t.createElement(re.I,{as:he.A,width:(0,y.a8)(8),height:(0,y.a8)(8)}),marginTop:2},r({id:i.customLink.id,defaultMessage:i.customLink.defaultMessage})))))))};var _t=n(58156),D=n.n(_t),Xt=n(94394),Jt=n.n(Xt),Qt=n(63560),Pt=n.n(Qt),wt=n(47091),en=n.n(wt),tn=n(5556),s=n.n(tn),Be=n(69733),nn=n(82960),an=n(56587),ze=n(18685),sn=n(75056),xt=n(43418),Lt=n(8740),Ve=n(99750),ct=n(11744),Ze=n(90480),on=n(25625),X=n(90954),rn=n(61448),ln=n.n(rn),dn=n(80218),It=n.n(dn);const Ft=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),ut=(e,a)=>e.find(({name:o})=>o===a);var St=n(81994);const cn=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],mt=({intlLabel:e,name:a,onChange:o,value:r})=>{const{formatMessage:i}=(0,B.A)(),d=r===null||r.length===0?i({id:"global.none",defaultMessage:"None"}):[...r].sort().map(u=>Ee()(u)).join(", "),l=e.id?i({id:e.id,defaultMessage:e.defaultMessage}):a;return t.createElement(St.B,{id:"select1",label:l,customizeContent:()=>d,onChange:u=>{u.length>0?o({target:{name:a,value:u,type:"allowed-types-select"}}):o({target:{name:a,value:null,type:"allowed-types-select"}})},options:cn,value:r||[]})};mt.defaultProps={value:null},mt.propTypes={intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().oneOfType([s().object,s().array])};const un=mt;var pt=n(74712),gt=n(96630),et=n(16473),tt=n(52002);const Bt=(0,J.Ay)(N.a)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,ft=({type:e})=>{const{formatMessage:a}=(0,B.A)(),{onClickSelectField:o}=(0,Pe.A)(),r=()=>{o({attributeType:e,step:e==="component"?"1":null})};return t.createElement(Bt,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:r},t.createElement(L.s,null,t.createElement(tt.A,{type:e}),t.createElement(N.a,{paddingLeft:4},t.createElement(L.s,null,t.createElement(z.o,{fontWeight:"bold"},a({id:(0,c.A)(`attribute.${e}`),defaultMessage:e}))),t.createElement(L.s,null,t.createElement(z.o,{variant:"pi",textColor:"neutral600"},a({id:(0,c.A)(`attribute.${e}.description`),defaultMessage:"A type for modeling data"}))))))};ft.defaultProps={type:"text"},ft.propTypes={type:s().string};const mn=ft,Nt=e=>{const a=e%2===1;return{paddingLeft:a?2:0,paddingRight:a?0:2}},Ut=({attributes:e})=>t.createElement(pt.r,{tagName:"button"},t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:8},e.map((a,o)=>t.createElement(gt.x,{key:o,gap:0},a.map((r,i)=>{const{paddingLeft:d,paddingRight:l}=Nt(i);return t.createElement(et.E,{key:r,col:6,style:{height:"100%"}},t.createElement(N.a,{paddingLeft:d,paddingRight:l,paddingBottom:1,style:{height:"100%"}},t.createElement(mn,{type:r})))})))));Ut.propTypes={attributes:s().array.isRequired};const pn=Ut;var gn=n(15006);const Wt=({customFieldUid:e,customField:a})=>{const{type:o,intlLabel:r,intlDescription:i}=a,{formatMessage:d}=(0,B.A)(),{onClickSelectCustomField:l}=(0,Pe.A)(),u=()=>{l({attributeType:o,customFieldUid:e})};return t.createElement(Bt,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:u},t.createElement(L.s,null,t.createElement(tt.A,{type:o,customField:e}),t.createElement(N.a,{paddingLeft:4},t.createElement(L.s,null,t.createElement(z.o,{fontWeight:"bold"},d(r))),t.createElement(L.s,null,t.createElement(z.o,{variant:"pi",textColor:"neutral600"},d(i))))))};Wt.propTypes={customFieldUid:s().string.isRequired,customField:s().shape({type:s().string.isRequired,icon:s().func,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired,intlDescription:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired}).isRequired};const fn=Wt;var Je=n(37553),yn=n(26840);const hn=(0,J.Ay)(yn.j)`
  &[aria-disabled='true'] {
    ${Je.mc}
    &:active {
      ${Je.mc}
    }
  }
  &:hover {
    ${Je.AD}
  }
  &:active {
    ${Je.qL}
  }
  ${Je.Bc}
`,An=t.forwardRef(({variant:e="default",startIcon:a,endIcon:o,disabled:r=!1,children:i,size:d="S",href:l,to:u,...m},f)=>{const g=l?"_blank":void 0,p=l?"noreferrer noopener":void 0,T=d==="S"?2:"10px",b=4;return(0,$.jsxs)(hn,{ref:f,"aria-disabled":r,size:d,variant:e,target:g,rel:p,to:r?void 0:u,href:r?"#":l,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:T,paddingLeft:b,paddingRight:b,paddingTop:T,pointerEvents:r?"none":void 0,...m,as:u&&!r?$e.k2:"a",children:[a&&(0,$.jsx)(L.s,{"aria-hidden":!0,children:a}),(0,$.jsx)(z.o,{variant:d==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:i}),o&&(0,$.jsx)(L.s,{"aria-hidden":!0,children:o})]})});var En=n(64184),vn=n(55373),Mn=n.n(vn);const bn=(0,J.Ay)(N.a)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Tn=()=>t.createElement(L.s,{wrap:"wrap",gap:4},[...Array(4)].map((e,a)=>t.createElement(bn,{key:`empty-card-${a}`,height:"138px",width:"375px",hasRadius:!0}))),Cn=()=>{const{formatMessage:e}=(0,B.A)();return t.createElement(N.a,{position:"relative"},t.createElement(Tn,null),t.createElement(N.a,{position:"absolute",top:6,width:"100%"},t.createElement(L.s,{alignItems:"center",justifyContent:"center",direction:"column"},t.createElement(re.I,{as:En.A,color:"",width:"160px",height:"88px"}),t.createElement(N.a,{paddingTop:6,paddingBottom:4},t.createElement(N.a,{textAlign:"center"},t.createElement(z.o,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,c.A)("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})),t.createElement(N.a,{paddingTop:4},t.createElement(z.o,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,c.A)("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."}))))),t.createElement(An,{to:`/marketplace?${Mn().stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:t.createElement(he.A,null)},e({id:(0,c.A)("modalForm.empty.button"),defaultMessage:"Add custom fields"})))))},Rn=()=>{const{formatMessage:e}=(0,B.A)(),a=(0,y.AC)(),o=Object.entries(a.getAll());if(!o.length)return t.createElement(Cn,null);const r=o.sort((i,d)=>i[1].name>d[1].name?1:-1);return t.createElement(pt.r,{tagName:"button"},t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:3},t.createElement(gt.x,{gap:0},r.map(([i,d],l)=>{const{paddingLeft:u,paddingRight:m}=Nt(l);return t.createElement(et.E,{key:i,col:6,style:{height:"100%"}},t.createElement(N.a,{paddingLeft:u,paddingRight:m,paddingBottom:1,style:{height:"100%"}},t.createElement(fn,{key:i,customFieldUid:i,customField:d})))})),t.createElement(gn.N,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0},e({id:(0,c.A)("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"}))))},jt=({attributes:e,forTarget:a,kind:o})=>{const{formatMessage:r}=(0,B.A)(),i=(0,c.A)("modalForm.tabs.default"),d=(0,c.A)("modalForm.tabs.custom"),l=a.includes("component")?"component":o,u=(0,c.A)(`modalForm.sub-header.chooseAttribute.${l}`);return t.createElement(xt.c,{padding:6},t.createElement(Lt.f,{label:r({id:(0,c.A)("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple"},t.createElement(L.s,{justifyContent:"space-between"},t.createElement(z.o,{variant:"beta",as:"h2"},r({id:u,defaultMessage:"Select a field"})),t.createElement(Ve.t,null,t.createElement(Ve.o,null,r({id:i,defaultMessage:"Default"})),t.createElement(Ve.o,null,r({id:d,defaultMessage:"Custom"})))),t.createElement(N.a,{paddingBottom:6},t.createElement(ct.c,null)),t.createElement(Ze.T,null,t.createElement(Ze.K,null,t.createElement(pn,{attributes:e})),t.createElement(Ze.K,null,t.createElement(Rn,null)))))};jt.propTypes={attributes:s().array.isRequired,forTarget:s().string.isRequired,kind:s().string.isRequired};const On=jt;var nt=n(15074),at=n(62431);const yt=({intlLabel:e,name:a,options:o,onChange:r,value:i})=>{const{formatMessage:d}=(0,B.A)(),l=e.id?d({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):a,u=m=>{let f="";m==="true"&&(f=!0),m==="false"&&(f=!1),r({target:{name:a,value:f,type:"select-default-boolean"}})};return t.createElement(nt.l,{label:l,id:a,name:a,onChange:u,value:(i===null?"":i).toString()},o.map(({metadatas:{intlLabel:m,disabled:f,hidden:g},key:p,value:T})=>t.createElement(at.c,{key:p,value:T,disabled:f,hidden:g},m.defaultMessage)))};yt.defaultProps={value:null},yt.propTypes={intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,name:s().string.isRequired,onChange:s().func.isRequired,options:s().arrayOf(s().shape({metadatas:s().shape({intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired,disabled:s().bool,hidden:s().bool}).isRequired,key:s().oneOfType([s().string,s().number]).isRequired,value:s().oneOfType([s().string,s().number]).isRequired}).isRequired).isRequired,value:s().any};const Dn=yt;var Kt=n(62099);const Pn=(0,J.Ay)(L.s)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,Kt.id)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${z.o} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,ht=({intlLabel:e,name:a,onChange:o,radios:r,value:i})=>{const{formatMessage:d}=(0,B.A)();return t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:2},t.createElement(z.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:a,as:"label"},d(e)),t.createElement(Pn,{gap:4,alignItems:"stretch"},r.map(l=>t.createElement("label",{htmlFor:l.value.toString(),key:l.value,className:"container"},t.createElement("input",{id:l.value.toString(),name:a,className:"option-input",checked:l.value===i,value:l.value,key:l.value,onChange:o,type:"radio"}),t.createElement(N.a,{className:"option",padding:4},t.createElement(L.s,null,t.createElement(N.a,{paddingRight:4},t.createElement("span",{className:"checkmark"})),t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:2},t.createElement(z.o,{fontWeight:"bold"},d(l.title)),t.createElement(z.o,{variant:"pi",textColor:"neutral600"},d(l.description)))))))))};ht.defaultProps={radios:[]},ht.propTypes={intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,name:s().string.isRequired,onChange:s().func.isRequired,radios:s().arrayOf(s().shape({title:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}),description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}),value:s().any.isRequired})),value:s().oneOfType([s().string,s().bool]).isRequired};const At=ht,$t=({onChange:e,name:a,...o})=>{const r=i=>{const d=i.target.value!=="false";e({target:{name:a,value:d,type:"boolean-radio-group"}})};return t.createElement(At,{...o,name:a,onChange:r})};$t.propTypes={name:s().string.isRequired,onChange:s().func.isRequired};const xn=$t;var zt=n(64200),Et=n(30524),Ln=n(9688);const vt=({error:e,intlLabel:a,modifiedData:o,name:r,onChange:i,value:d})=>{const{formatMessage:l}=(0,B.A)(),[u,m]=(0,t.useState)(!!d||d===0),f=a.id?l({id:a.id,defaultMessage:a.defaultMessage},{...a.values}):r,g=o.type==="biginteger"?"text":"number",p=!o.type,T=e?l({id:e,defaultMessage:e}):"";return t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:2},t.createElement(zt.S,{id:r,name:r,onValueChange:b=>{i({target:{name:r,value:b?g==="text"?"0":0:null}}),m(F=>!F)},value:u},f),u&&t.createElement(N.a,{paddingLeft:6,style:{maxWidth:"200px"}},g==="text"?t.createElement(Et.k,{"aria-label":f,disabled:p,error:T,id:r,name:r,onChange:i,value:d===null?"":d}):t.createElement(Ln.Q,{"aria-label":f,disabled:p,error:T,id:r,name:r,onValueChange:b=>{i({target:{name:r,value:b,type:g}})},value:d||0})))};vt.defaultProps={error:null,value:null},vt.propTypes={error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,modifiedData:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().oneOfType([s().string,s().object,s().bool,s().number])};const In=vt,Vt=({onChange:e,...a})=>{const o=(0,y.hN)(),r=i=>{o({type:"info",message:{id:(0,c.A)("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),e(i)};return t.createElement(At,{...a,onChange:r})};Vt.propTypes={onChange:s().func.isRequired};const Fn=Vt,Mt=({description:e,disabled:a,intlLabel:o,isCreating:r,name:i,onChange:d,value:l})=>{const{formatMessage:u}=(0,B.A)(),[m,f]=(0,t.useState)(!1),g=o.id?u({id:o.id,defaultMessage:o.defaultMessage},{...o.values}):i,p=e?u({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=()=>f(R=>!R),b=()=>{d({target:{name:i,value:!1}}),T()},v=({target:{checked:R}})=>{if(!R&&!r){T();return}d({target:{name:i,value:R}})};return t.createElement(t.Fragment,null,t.createElement(zt.S,{checked:l,disabled:a,hint:p,name:i,onChange:v},g),t.createElement(y.TM,{isOpen:m,onToggleDialog:T,onConfirm:b,bodyText:{id:(0,c.A)("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."},leftButtonText:{id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"},rightButtonText:{id:(0,c.A)("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}}))};Mt.defaultProps={description:null,disabled:!1,value:!1},Mt.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,isCreating:s().bool.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().bool};const Sn=Mt,bt=({categoryName:e,deleteCategory:a,deleteComponent:o,deleteContentType:r,isAttributeModal:i,isCustomFieldModal:d,isComponentAttribute:l,isComponentToDzModal:u,isContentTypeModal:m,isCreatingComponent:f,isCreatingComponentAttribute:g,isCreatingComponentInDz:p,isCreatingComponentWhileAddingAField:T,isCreatingContentType:b,isCreatingDz:v,isComponentModal:R,isDzAttribute:F,isEditingAttribute:M,isEditingCategory:P,isInFirstComponentStep:I,onSubmitAddComponentAttribute:S,onSubmitAddComponentToDz:q,onSubmitCreateContentType:de,onSubmitCreateComponent:ve,onSubmitCreateDz:U,onSubmitEditAttribute:Ae,onSubmitEditCategory:_,onSubmitEditComponent:Me,onSubmitEditContentType:te,onSubmitEditCustomFieldAttribute:ee,onSubmitEditDz:Ne,onClickFinish:ce})=>{const{formatMessage:Y}=(0,B.A)();return u?p?t.createElement(X.$,{variant:"secondary",type:"submit",onClick:C=>{C.preventDefault(),q(C,!0)},startIcon:t.createElement(he.A,null)},Y({id:(0,c.A)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})):t.createElement(X.$,{variant:"default",type:"submit",onClick:C=>{C.preventDefault(),q(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"})):i&&F&&!v?t.createElement(X.$,{variant:"default",type:"submit",onClick:C=>{C.preventDefault(),ce(),Ne(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"})):i&&F&&v?t.createElement(t.Fragment,null,t.createElement(X.$,{variant:"secondary",type:"submit",onClick:C=>{C.preventDefault(),U(C,!0)},startIcon:t.createElement(he.A,null)},Y({id:(0,c.A)("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"}))):i&&l?I?t.createElement(X.$,{variant:"secondary",type:"submit",onClick:C=>{C.preventDefault(),S(C,!0)}},Y(g?{id:(0,c.A)("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:(0,c.A)("form.button.select-component"),defaultMessage:"Configure the component"})):t.createElement(t.Fragment,null,t.createElement(X.$,{variant:"secondary",type:"submit",onClick:C=>{C.preventDefault(),S(C,!0)},startIcon:t.createElement(he.A,null)},Y(T?{id:(0,c.A)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:(0,c.A)("form.button.add-field"),defaultMessage:"Add another field"})),t.createElement(X.$,{variant:"default",type:"button",onClick:C=>{C.preventDefault(),ce(),S(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"}))):i&&!l&&!F?t.createElement(t.Fragment,null,t.createElement(X.$,{type:M?"button":"submit",variant:"secondary",onClick:C=>{C.preventDefault(),Ae(C,!0)},startIcon:t.createElement(he.A,null)},Y({id:(0,c.A)("form.button.add-field"),defaultMessage:"Add another field"})),t.createElement(X.$,{type:M?"submit":"button",variant:"default",onClick:C=>{C.preventDefault(),ce(),Ae(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"}))):m?t.createElement(t.Fragment,null,!b&&t.createElement(t.Fragment,null,t.createElement(X.$,{type:"button",variant:"danger",onClick:C=>{C.preventDefault(),r()}},Y({id:"global.delete",defaultMessage:"Delete"})),t.createElement(X.$,{type:"submit",variant:"default",onClick:C=>{C.preventDefault(),te(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"}))),b&&t.createElement(X.$,{type:"submit",variant:"secondary",onClick:C=>{C.preventDefault(),de(C,!0)}},Y({id:"global.continue",defaultMessage:"Continue"}))):R?t.createElement(t.Fragment,null,!f&&t.createElement(t.Fragment,null,t.createElement(X.$,{type:"button",variant:"danger",onClick:C=>{C.preventDefault(),o()}},Y({id:"global.delete",defaultMessage:"Delete"})),t.createElement(X.$,{type:"submit",variant:"default",onClick:C=>{C.preventDefault(),Me(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"}))),f&&t.createElement(X.$,{type:"submit",variant:"secondary",onClick:C=>{C.preventDefault(),ve(C,!0)}},Y({id:"global.continue",defaultMessage:"Continue"}))):P?t.createElement(t.Fragment,null,t.createElement(X.$,{type:"button",variant:"danger",onClick:C=>{C.preventDefault(),a(e)}},Y({id:"global.delete",defaultMessage:"Delete"})),t.createElement(X.$,{type:"submit",variant:"default",onClick:C=>{C.preventDefault(),_(C)}},Y({id:"global.finish",defaultMessage:"finish"}))):d?t.createElement(t.Fragment,null,t.createElement(X.$,{type:M?"button":"submit",variant:"secondary",onClick:C=>{C.preventDefault(),ee(C,!0)},startIcon:t.createElement(he.A,null)},Y({id:(0,c.A)("form.button.add-field"),defaultMessage:"Add another field"})),t.createElement(X.$,{type:M?"submit":"button",variant:"default",onClick:C=>{C.preventDefault(),ce(),ee(C,!1)}},Y({id:"global.finish",defaultMessage:"Finish"}))):null};bt.defaultProps={categoryName:null,onClickFinish(){}},bt.propTypes={categoryName:s().string,deleteCategory:s().func.isRequired,deleteComponent:s().func.isRequired,deleteContentType:s().func.isRequired,isAttributeModal:s().bool.isRequired,isCustomFieldModal:s().bool.isRequired,isComponentAttribute:s().bool.isRequired,isComponentModal:s().bool.isRequired,isComponentToDzModal:s().bool.isRequired,isContentTypeModal:s().bool.isRequired,isCreatingComponent:s().bool.isRequired,isCreatingComponentAttribute:s().bool.isRequired,isCreatingComponentInDz:s().bool.isRequired,isCreatingComponentWhileAddingAField:s().bool.isRequired,isCreatingContentType:s().bool.isRequired,isCreatingDz:s().bool.isRequired,isDzAttribute:s().bool.isRequired,isEditingAttribute:s().bool.isRequired,isEditingCategory:s().bool.isRequired,isInFirstComponentStep:s().bool.isRequired,onSubmitAddComponentAttribute:s().func.isRequired,onSubmitAddComponentToDz:s().func.isRequired,onSubmitCreateContentType:s().func.isRequired,onSubmitCreateComponent:s().func.isRequired,onSubmitCreateDz:s().func.isRequired,onSubmitEditAttribute:s().func.isRequired,onSubmitEditCategory:s().func.isRequired,onSubmitEditComponent:s().func.isRequired,onSubmitEditContentType:s().func.isRequired,onSubmitEditCustomFieldAttribute:s().func.isRequired,onSubmitEditDz:s().func.isRequired,onClickFinish:s().func};const Bn=bt;var Zt=n(91267),Nn=n(67066),Un=n(95998),Wn=n(40009);const jn=({actionType:e,attributeName:a,attributeType:o,categoryName:r,contentTypeKind:i,dynamicZoneTarget:d,forTarget:l,modalType:u,targetUid:m,customFieldUid:f,showBackLink:g})=>{const{formatMessage:p}=(0,B.A)(),{modifiedData:T}=(0,Q.A)(),{onOpenModalAddField:b}=(0,Pe.A)();let v,R=[];const F=T?.[l]?.[m]||T?.[l]||null;let M=F?.schema.displayName;if(u==="contentType"&&(v=i),["component","editCategory"].includes(u)&&(v="component"),["component","contentType"].includes(u)){let I=(0,c.A)(`modalForm.component.header-${e}`);return u==="contentType"&&(I=(0,c.A)(`modalForm.${i}.header-create`)),e==="edit"&&(I=(0,c.A)("modalForm.header-edit")),t.createElement(Zt.r,null,t.createElement(L.s,null,t.createElement(N.a,null,t.createElement(tt.A,{type:v})),t.createElement(N.a,{paddingLeft:3},t.createElement(z.o,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},p({id:I},{name:M})))))}return R=[{label:M,info:{category:F?.category||null,name:F?.schema.displayName}}],u==="chooseAttribute"&&(v=["component","components"].includes(l)?"component":F.schema.kind),u==="addComponentToDynamicZone"&&(v="dynamiczone",R.push({label:d})),(u==="attribute"||u==="customField")&&(v=o,R.push({label:a})),u==="editCategory"&&(R=[{label:p({id:(0,c.A)("modalForm.header.categories"),defaultMessage:"Categories"})},{label:r}]),t.createElement(Zt.r,null,t.createElement(L.s,{gap:3},g&&t.createElement(y.N_,{"aria-label":p({id:(0,c.A)("modalForm.header.back"),defaultMessage:"Back"}),startIcon:t.createElement(Wn.A,null),onClick:()=>b({forTarget:l,targetUid:m}),to:"#back"}),t.createElement(tt.A,{type:v,customField:f}),t.createElement(Nn.B,{label:R.map(({label:I})=>I).join(",")},R.map(({label:I,info:S},q,de)=>{if(I=Ee()(I),!I)return null;const ve=`${I}.${q}`;return S?.category&&(I=`${I} (${Ee()(S.category)} - ${Ee()(S.name)})`),t.createElement(Un.m,{isCurrent:q===de.length-1,key:ve},I)}))))};jn.defaultProps={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,contentTypeKind:null,targetUid:null,customFieldUid:null,showBackLink:!1},jn.propTypes={actionType:s().string,attributeName:s().string,attributeType:s().string,categoryName:s().string,contentTypeKind:s().string,dynamicZoneTarget:s().string,forTarget:s().oneOf(["contentType","component","components"]),modalType:s().string.isRequired,targetUid:s().string,customFieldUid:s().string,showBackLink:s().bool};const ds=jn,cs=({modalType:e,forTarget:a,kind:o,actionType:r,step:i})=>{switch(e){case"chooseAttribute":return(0,c.A)(`modalForm.sub-header.chooseAttribute.${a.includes("component")?"component":o||"collectionType"}`);case"attribute":return(0,c.A)(`modalForm.sub-header.attribute.${r}${i!=="null"&&i!==null&&r!=="edit"?".step":""}`);case"customField":return(0,c.A)(`modalForm.sub-header.attribute.${r}`);case"addComponentToDynamicZone":return(0,c.A)("modalForm.sub-header.addComponentToDynamicZone");default:return(0,c.A)("configurations")}},Kn=({actionType:e,modalType:a,forTarget:o,kind:r,step:i,attributeType:d,attributeName:l,customField:u})=>{const{formatMessage:m}=(0,B.A)(),f=a==="customField"?u.intlLabel:{id:(0,c.A)(`attribute.${d}`)};return t.createElement(L.s,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1},t.createElement(z.o,{as:"h2",variant:"beta"},m({id:cs({actionType:e,forTarget:o,kind:r,step:i,modalType:a}),defaultMessage:"Add new field"},{type:Ee()(m(f)),name:Ee()(l),step:i})),t.createElement(z.o,{variant:"pi",textColor:"neutral600"},m({id:(0,c.A)(`attribute.${d}.description`),defaultMessage:"A type for modeling data"})))};Kn.defaultProps={actionType:null,modalType:null,forTarget:null,kind:null,step:null,attributeType:null,attributeName:null,customField:null},Kn.propTypes={actionType:s().string,modalType:s().string,forTarget:s().string,kind:s().string,step:s().string,attributeType:s().string,attributeName:s().string,customField:s().object};const us=Kn;var ms=n(88860),ps=n(86612),gs=n(69688),fs=n(1134),ys=n(78820),Ra=n(63292),hs=n(43210),As=n(99525),Es=n(34487),Oa=n(45492);const vs=(0,J.Ay)(L.s)`
  label {
    ${Kt.id}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,Da=({iconKey:e,name:a,onChange:o,isSelected:r,ariaLabel:i})=>t.createElement(ms.D,{name:a,required:!1},t.createElement(ps.d,{htmlFor:e,id:`${e}-label`},t.createElement(gs.s,null,t.createElement(fs.T,{type:"radio",id:e,name:a,checked:r,onChange:o,value:e,"aria-checked":r,"aria-labelledby":`${e}-label`}),i),t.createElement(L.s,{padding:2,cursor:"pointer",hasRadius:!0,background:r&&"primary200"},t.createElement(re.I,{as:Oa.z[e],color:r?"primary600":"neutral300"}))));Da.propTypes={iconKey:s().string.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,isSelected:s().bool.isRequired,ariaLabel:s().string.isRequired};const $n=({intlLabel:e,name:a,onChange:o,value:r})=>{const{formatMessage:i}=(0,B.A)(),[d,l]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),f=Object.keys(Oa.z),[g,p]=(0,t.useState)(f),T=(0,t.useRef)(null),b=(0,t.useRef)(null),v=()=>{l(!d)},R=({target:{value:P}})=>{m(P),p(()=>f.filter(I=>I.toLowerCase().includes(P.toLowerCase())))},F=()=>{v(),m(""),p(f)},M=()=>{o({target:{name:a,value:""}})};return(0,t.useEffect)(()=>{d&&b.current.focus()},[d]),t.createElement(t.Fragment,null,t.createElement(L.s,{justifyContent:"space-between",paddingBottom:2},t.createElement(z.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800",as:"label"},i(e)),t.createElement(L.s,{gap:1},d?t.createElement(ys.S,{ref:b,name:"searchbar",size:"S",placeholder:i({id:(0,c.A)("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{u||v()},onChange:R,value:u,onClear:F,clearLabel:i({id:(0,c.A)("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"})},i({id:(0,c.A)("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})):t.createElement(Ra.K,{ref:T,onClick:v,"aria-label":i({id:(0,c.A)("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),icon:t.createElement(As.A,null),noBorder:!0}),r&&t.createElement(hs.m,{description:i({id:(0,c.A)("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"})},t.createElement(Ra.K,{onClick:M,"aria-label":i({id:(0,c.A)("IconPicker.remove.button"),defaultMessage:"Remove the selected icon button"}),icon:t.createElement(Es.A,null),noBorder:!0})))),t.createElement(vs,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center"},g.length>0?g.map(P=>t.createElement(Da,{key:P,iconKey:P,name:a,onChange:o,isSelected:P===r,ariaLabel:i({id:(0,c.A)("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:P})})):t.createElement(N.a,{padding:4,grow:2},t.createElement(z.o,{variant:"delta",textColor:"neutral600",textAlign:"center"},i({id:(0,c.A)("IconPicker.emptyState.label"),defaultMessage:"No icon found"})))))};$n.defaultProps={value:""},$n.propTypes={intlLabel:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string};const Ms=$n;var bs=n(55127),zn=n.n(bs),Pa=n(3037);const Vn=({description:e,error:a,intlLabel:o,modifiedData:r,name:i,onChange:d,value:l})=>{const{formatMessage:u}=(0,B.A)(),m=(0,t.useRef)(d),f=r?.displayName||"";(0,t.useEffect)(()=>{if(f){const b=(0,Pa.A)(f);try{const v=zn()(b,2);m.current({target:{name:i,value:v}})}catch{m.current({target:{name:i,value:b}})}}else m.current({target:{name:i,value:""}})},[f,i]);const g=a?u({id:a,defaultMessage:a}):"",p=e?u({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=u(o);return t.createElement(Et.k,{error:g,label:T,id:i,hint:p,name:i,onChange:d,value:l||""})};Vn.defaultProps={description:null,error:null,value:null},Vn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,modifiedData:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string};const Ts=Vn;var Zn=n(28314),Yt=n(24346),w=n(31340);const Yn=({oneThatIsCreatingARelationWithAnother:e,target:a})=>{const{contentTypes:o,sortedContentTypesList:r}=(0,Q.A)(),i=(0,Be.wA)(),d=r.filter(Ft),{plugin:l=null,schema:{displayName:u}={displayName:"error"}}=o?.[a]??{},m=({uid:f,plugin:g,title:p,restrictRelationsTo:T})=>()=>{const b=g?`${g}_${p}`:p;i({type:w.UI,target:{value:f,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:b,targetContentTypeAllowedRelations:T}})};return t.createElement(Yt.bL,null,t.createElement(Cs,null,`${u} ${l?`(from: ${l})`:""}`),t.createElement(Yt.UC,{zIndex:5},d.map(({uid:f,title:g,restrictRelationsTo:p,plugin:T})=>t.createElement(Yt.q7,{key:f,onSelect:m({uid:f,plugin:T,title:g,restrictRelationsTo:p})},g,"\xA0",T&&t.createElement(t.Fragment,null,"(from: ",T,")")))))};Yn.defaultProps={target:null},Yn.propTypes={oneThatIsCreatingARelationWithAnother:s().string.isRequired,target:s().string};const Cs=(0,J.Ay)(Yt.l9)`
  svg {
    width: ${6/16}rem;
    height: ${4/16}rem;
  }
`,Rs=Yn,Hn=({disabled:e,error:a,header:o,isMain:r,name:i,onChange:d,oneThatIsCreatingARelationWithAnother:l,target:u,value:m})=>t.createElement(N.a,{background:"neutral100",hasRadius:!0,borderColor:"neutral200"},t.createElement(L.s,{paddingTop:r?4:1,paddingBottom:r?3:1,justifyContent:"center"},r?t.createElement(z.o,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},o):t.createElement(Rs,{target:u,oneThatIsCreatingARelationWithAnother:l})),t.createElement(ct.c,{background:"neutral200"}),t.createElement(N.a,{padding:4},t.createElement(y.ah,{disabled:e,error:a?.id||null,intlLabel:{id:(0,c.A)("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:i,onChange:d,type:"text",value:m})));Hn.defaultProps={disabled:!1,error:null,header:null,isMain:!1,onChange(){},oneThatIsCreatingARelationWithAnother:null,target:null,value:""},Hn.propTypes={disabled:s().bool,error:s().object,header:s().string,isMain:s().bool,name:s().string.isRequired,onChange:s().func,oneThatIsCreatingARelationWithAnother:s().string,target:s().string,value:s().string};const xa=Hn;var Os=n(62122),Ds=n(98846),Ps=n(4295),xs=n(47031),Ls=n(97328),Is=n(16334),Fs=n(92516),La=n.n(Fs);const Ss=(0,J.Ay)(N.a)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,Bs=(0,J.Ay)(N.a)`
  background: ${({theme:e,isSelected:a})=>e.colors[a?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:a})=>e.colors[a?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,Ns=(0,J.Ay)(L.s)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,Us={oneWay:Os.A,oneToOne:Ds.A,oneToMany:Ps.A,manyToOne:xs.A,manyToMany:Ls.A,manyWay:Is.A},kn=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:a,relationType:o,target:r})=>{const i=(0,Be.wA)(),{formatMessage:d}=(0,B.A)(),{contentTypes:l,modifiedData:u}=(0,Q.A)(),m=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],f=["oneWay","manyWay"],p=(e==="contentType"?D()(u,[e,"schema","kind"],""):e)==="collectionType"?m:f,T=o==="manyToOne",b=D()(l,[r,"schema","displayName"],"unknown"),v=T?b:a,R=T?a:b,F=zn()(v,o==="manyToMany"?2:1),M=D()(l,[r,"schema","restrictRelationsTo"],null),P=zn()(R,["manyToMany","oneToMany","manyToOne","manyWay"].includes(o)?2:1);return o?t.createElement(L.s,{style:{flex:1}},t.createElement(Ss,null,t.createElement(L.s,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center"},t.createElement(pt.r,{tagName:"button"},t.createElement(L.s,{gap:3},p.map(I=>{const S=Us[I],q=M===null||M.includes(I);return t.createElement(Bs,{as:"button",isSelected:o===I,disabled:!q,key:I,onClick:()=>{q&&i({type:w.dX,target:{oneThatIsCreatingARelationWithAnother:a,targetContentType:r,value:I}})},padding:2,type:"button"},t.createElement(S,{key:I}))}))))),t.createElement(Ns,{justifyContent:"center"},t.createElement(z.o,null,La()(F,{length:24}),"\xA0"),t.createElement(z.o,{textColor:"primary600"},d({id:(0,c.A)(`relation.${o}`)}),"\xA0"),t.createElement(z.o,null,La()(P,{length:24})))):null};kn.defaultProps={relationType:null,target:null},kn.propTypes={naturePickerType:s().string.isRequired,oneThatIsCreatingARelationWithAnother:s().string.isRequired,relationType:s().string,target:s().string};const Ws=kn,Ia=({formErrors:e,mainBoxHeader:a,modifiedData:o,naturePickerType:r,onChange:i})=>{const d=(0,Zn.A)(o.relation,o.targetAttribute);return t.createElement(L.s,{style:{position:"relative"}},t.createElement(xa,{isMain:!0,header:a,error:e?.name||null,name:"name",onChange:i,value:o?.name||""}),t.createElement(Ws,{naturePickerType:r,oneThatIsCreatingARelationWithAnother:a,relationType:d,target:o.target}),t.createElement(xa,{disabled:["oneWay","manyWay"].includes(d),error:e?.targetAttribute||null,name:"targetAttribute",onChange:i,oneThatIsCreatingARelationWithAnother:a,target:o.target,value:o?.targetAttribute||""}))};Ia.propTypes={formErrors:s().object.isRequired,mainBoxHeader:s().string.isRequired,modifiedData:s().object.isRequired,naturePickerType:s().string.isRequired,onChange:s().func.isRequired};const js=Ia;var Ks=n(64040),$s=n(60985);const Gn=({error:e,intlLabel:a,name:o,onChange:r,value:i})=>{const{formatMessage:d}=(0,B.A)(),{allComponentsCategories:l}=(0,Q.A)(),[u,m]=(0,t.useState)(l),f=e?d({id:e,defaultMessage:e}):"",g=d(a),p=b=>{r({target:{name:o,value:b,type:"select-category"}})},T=b=>{m(v=>[...v,b]),p(b)};return t.createElement(Ks.nP,{error:f,id:o,label:g,name:o,onChange:p,onCreateOption:T,value:i},u.map(b=>t.createElement($s.j,{key:b,value:b},b)))};Gn.defaultProps={error:null,value:null},Gn.propTypes={error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string};const zs=Gn,qn=({error:e,intlLabel:a,isAddingAComponentToAnotherComponent:o,isCreating:r,isCreatingComponentWhileAddingAField:i,componentToCreate:d,name:l,onChange:u,targetUid:m,forTarget:f,value:g})=>{const{formatMessage:p}=(0,B.A)(),T=e?p({id:e,defaultMessage:e}):"",b=p(a),{componentsGroupedByCategory:v,componentsThatHaveOtherComponentInTheirAttributes:R}=(0,Q.A)(),F=["component","components"].includes(f);let M=Object.entries(v).reduce((P,I)=>{const[S,q]=I,de=q.map(ve=>({uid:ve.uid,label:ve.schema.displayName,categoryName:S}));return[...P,...de]},[]);return o&&(M=M.filter(P=>!R.includes(P.uid))),F&&(M=M.filter(P=>P.uid!==m)),i&&(M=[{uid:g,label:d.displayName,categoryName:d.category}]),t.createElement(nt.l,{disabled:i||!r,error:T,label:b,id:l,name:l,onChange:P=>{u({target:{name:l,value:P,type:"select-category"}})},value:g||""},M.map(P=>t.createElement(at.c,{key:P.uid,value:P.uid},`${P.categoryName} - ${P.label}`)))};qn.defaultProps={componentToCreate:null,error:null},qn.propTypes={componentToCreate:s().object,forTarget:s().string.isRequired,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,isAddingAComponentToAnotherComponent:s().bool.isRequired,isCreating:s().bool.isRequired,isCreatingComponentWhileAddingAField:s().bool.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,targetUid:s().string.isRequired,value:s().string.isRequired};const Vs=qn,Fa=({dynamicZoneTarget:e,intlLabel:a,name:o,onChange:r,value:i})=>{const{formatMessage:d}=(0,B.A)(),{componentsGroupedByCategory:l,modifiedData:u}=(0,Q.A)(),f=(ut(u.contentType.schema.attributes,e)||{}).components||[],g=Object.keys(l).reduce((b,v)=>{const R=l[v].filter(({uid:F})=>!f.includes(F));return R.length>0&&(b[v]=R),b},{}),p=Object.entries(g).reduce((b,v)=>{const[R,F]=v,M={label:R,children:F.map(({uid:P,schema:{displayName:I}})=>({label:I,value:P}))};return b.push(M),b},[]),T=d({id:(0,c.A)("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:i.length});return t.createElement(St.B,{id:"select1",label:d(a),customizeContent:()=>T,name:o,onChange:b=>{r({target:{name:o,value:b,type:"select-components"}})},options:p,value:i||[]})};Fa.propTypes={intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,dynamicZoneTarget:s().string.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().array.isRequired};const Zs=Fa,_n=({intlLabel:e,error:a,modifiedData:o,name:r,onChange:i,options:d,value:l})=>{const{formatMessage:u}=(0,B.A)(),m=u(e),f=a?u({id:a,defaultMessage:a}):"",g=p=>{i({target:{name:r,value:p,type:"select"}}),l&&o.default!==void 0&&o.default!==null&&i({target:{name:"default",value:null}})};return t.createElement(nt.l,{error:f,label:m,id:r,name:r,onChange:g,value:l||""},d.map(({metadatas:{intlLabel:p,disabled:T,hidden:b},key:v,value:R})=>t.createElement(at.c,{key:v,value:R,disabled:T,hidden:b},u({id:p.id,defaultMessage:p.defaultMessage},p.values))))};_n.defaultProps={error:void 0,value:""},_n.propTypes={error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,modifiedData:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,options:s().arrayOf(s().shape({metadatas:s().shape({intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired,disabled:s().bool,hidden:s().bool}).isRequired,key:s().oneOfType([s().string,s().number]).isRequired,value:s().oneOfType([s().string,s().number]).isRequired}).isRequired).isRequired,value:s().string};const Ys=_n,Xn=({intlLabel:e,error:a,modifiedData:o,name:r,onChange:i,options:d,value:l})=>{const{formatMessage:u}=(0,B.A)(),m=u(e),f=a?u({id:a,defaultMessage:a}):"",g=p=>{i({target:{name:r,value:p,type:"select"}}),l&&(p==="biginteger"&&l!=="biginteger"&&(o.default!==void 0&&o.default!==null&&i({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&i({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&i({target:{name:"min",value:null}})),["decimal","float","integer"].includes(p)&&l==="biginteger"&&(o.default!==void 0&&o.default!==null&&i({target:{name:"default",value:null}}),o.max!==void 0&&o.max!==null&&i({target:{name:"max",value:null}}),o.min!==void 0&&o.min!==null&&i({target:{name:"min",value:null}})))};return t.createElement(nt.l,{error:f,label:m,id:r,name:r,onChange:g,value:l||""},d.map(({metadatas:{intlLabel:p,disabled:T,hidden:b},key:v,value:R})=>t.createElement(at.c,{key:v,value:R,disabled:T,hidden:b},u(p))))};Xn.defaultProps={error:void 0,value:""},Xn.propTypes={error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,modifiedData:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,options:s().arrayOf(s().shape({metadatas:s().shape({intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired}).isRequired,disabled:s().bool,hidden:s().bool}).isRequired,key:s().oneOfType([s().string,s().number]).isRequired,value:s().oneOfType([s().string,s().number]).isRequired}).isRequired).isRequired,value:s().string};const Hs=Xn,Jn=({description:e,error:a,intlLabel:o,modifiedData:r,name:i,onChange:d,value:l})=>{const{formatMessage:u}=(0,B.A)(),m=(0,t.useRef)(d),f=r?.displayName||"";(0,t.useEffect)(()=>{f?m.current({target:{name:i,value:(0,Pa.A)(f)}}):m.current({target:{name:i,value:""}})},[f,i]);const g=a?u({id:a,defaultMessage:a}):"",p=e?u({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=u(o);return t.createElement(Et.k,{error:g,label:T,id:i,hint:p,name:i,onChange:d,value:l||""})};Jn.defaultProps={description:null,error:null,value:null},Jn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,modifiedData:s().object.isRequired,name:s().string.isRequired,onChange:s().func.isRequired,value:s().string};const ks=Jn,Sa=({form:e,formErrors:a,genericInputProps:o,modifiedData:r,onChange:i})=>{const{formatMessage:d}=(0,B.A)();return e.map((l,u)=>l.items.length===0?null:t.createElement(N.a,{key:u},l.sectionTitle&&t.createElement(N.a,{paddingBottom:4},t.createElement(z.o,{variant:"delta",as:"h3"},d(l.sectionTitle))),t.createElement(gt.x,{gap:4},l.items.map((m,f)=>{const g=`${u}.${f}`,p=D()(r,m.name,""),T=Object.keys(a).find(v=>v===m.name),b=T?a[T].id:D()(a,[...m.name.split(".").filter(v=>v!=="componentToCreate"),"id"],null);return m.type==="pushRight"?t.createElement(et.E,{col:m.size||6,key:m.name||g},t.createElement("div",null)):t.createElement(et.E,{col:m.size||6,key:m.name||g},t.createElement(y.ah,{...m,...o,error:b,onChange:i,value:p}))}))))};Sa.propTypes={form:s().arrayOf(s().object).isRequired,formErrors:s().object.isRequired,genericInputProps:s().object.isRequired,modifiedData:s().object.isRequired,onChange:s().func.isRequired};const Ba=Sa;var Gs=n(56046);const Qn=({description:e,disabled:a,error:o,intlLabel:r,labelAction:i,name:d,onChange:l,placeholder:u,value:m})=>{const{formatMessage:f}=(0,B.A)(),g=o?f({id:o,defaultMessage:o}):"",p=e?f({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",T=f(r),b=u?f({id:u.id,defaultMessage:u.defaultMessage},{...u.values}):"",v=Array.isArray(m)?m.join(`
`):"",R=F=>{const M=F.target.value.split(`
`);l({target:{name:d,value:M}})};return t.createElement(Gs.T,{disabled:a,error:g,label:T,labelAction:i,id:d,hint:p,name:d,onChange:R,placeholder:b,value:v},v)};Qn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,value:""},Qn.propTypes={description:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),disabled:s().bool,error:s().string,intlLabel:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}).isRequired,labelAction:s().element,name:s().string.isRequired,onChange:s().func.isRequired,placeholder:s().shape({id:s().string.isRequired,defaultMessage:s().string.isRequired,values:s().object}),value:s().oneOfType([s().array,s().string])};const qs=Qn,Ie={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,c.A)("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},_s={sections:[{sectionTitle:null,items:[Ie]}]},wn={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,c.A)("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:(0,c.A)("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:(0,c.A)("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:(0,c.A)("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]};var E=n(20627);const Na=/^[A-Za-z][-_0-9A-Za-z]*$/,Xs=e=>{const a={name:E.Yj().matches(Na,y.iW.regex).test({name:"nameNotAllowed",message:y.iW.unique,test(o){return o?!e.includes(o?.toLowerCase()):!1}}).required(y.iW.required)};return E.Ik(a)},Js={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,c.A)("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}};var st=n(94525);const Qs=(e,a,o)=>{const r={displayName:E.Yj().test({name:"nameAlreadyUsed",message:y.iW.unique,test(i){if(!i)return!1;const d=(0,st.A)(i,o);return!e.includes(d)}}).test({name:"nameNotAllowed",message:(0,c.A)("error.contentTypeName.reserved-name"),test(i){return i?!a.includes(i?.trim()?.toLowerCase()):!1}}).required(y.iW.required),category:E.Yj().matches(Na,y.iW.regex).required(y.iW.required),icon:E.Yj()};return E.Ik(r)},ot={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:(0,c.A)("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:(0,c.A)("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:(0,c.A)("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},x={default:{name:"default",type:"text",intlLabel:{id:(0,c.A)("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:(0,c.A)("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:(0,c.A)("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:(0,c.A)("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:(0,c.A)("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:(0,c.A)("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:(0,c.A)("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:(0,c.A)("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:(0,c.A)("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:(0,c.A)("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:(0,c.A)("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:(0,c.A)("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:(0,c.A)("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},Ua={advanced:{boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:(0,c.A)("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},component({repeatable:e},a){return a==="1"?{sections:ot.advanced("componentToCreate")}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private,x.max,x.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...x.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.max,x.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...x.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.maxLength,x.minLength,x.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:(0,c.A)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((a,o)=>e.enum.indexOf(a)===o&&a).map(a=>({key:a,value:a,metadatas:{intlLabel:{id:`${a}.no-override`,defaultMessage:a}}}))]},{intlLabel:{id:(0,c.A)("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:(0,c.A)("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:(0,c.A)("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.private]}]}},number(e){const a=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:a,intlLabel:{id:(0,c.A)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.max,x.min,x.private]}]}},password(){return{sections:[{sectionTitle:null,items:[x.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[x.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}},text(){return{sections:[{sectionTitle:null,items:[x.default,x.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.unique,x.maxLength,x.minLength,x.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...x.default,disabled:Boolean(e.targetField),type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[x.required,x.maxLength,x.minLength,x.private]}]}}},base:{component(e,a){if(a==="1"){const o=e.createComponent===!0?ot.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[wn]},...o]}}return{sections:[{sectionTitle:null,items:[Ie,{name:"component",type:"select-component",intlLabel:{id:(0,c.A)("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,c.A)("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:(0,c.A)("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:(0,c.A)("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:(0,c.A)("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[Ie,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[Ie]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:(0,c.A)("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:(0,c.A)("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[Ie]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:(0,c.A)("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:(0,c.A)("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:(0,c.A)("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:(0,c.A)("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[Ie,{intlLabel:{id:(0,c.A)("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:(0,c.A)("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[Ie]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,c.A)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,c.A)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,c.A)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,c.A)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[Ie]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,c.A)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,c.A)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,c.A)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,c.A)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,a,o){const r=o.filter(({type:i})=>["string","text"].includes(i)).map(({name:i})=>({key:i,value:i,metadatas:{intlLabel:{id:`${i}.no-override`,defaultMessage:i}}}));return{sections:[{sectionTitle:null,items:[{...Ie,placeholder:{id:(0,c.A)("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:(0,c.A)("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...r]}]}]}}}};var ws=n(63375),eo=n.n(ws),to=n(26148),no=n.n(to);const ea=e=>no()(e,{decamelize:!1,lowercase:!1,separator:"_"});var ao=n(99374),ta=n.n(ao);const Wa=/^[A-Za-z][_0-9A-Za-z]*$/,ja=e=>({name:"attributeNameAlreadyUsed",message:y.iW.unique,test(a){return a?!e.includes(a):!1}}),bi=(e,a,o)=>{const r=e?.schema?.attributes??{};return Object.keys(r).filter(i=>a?i!==o:!0)},na=e=>({name:"forbiddenAttributeName",message:(0,c.A)("error.attributeName.reserved-name"),test(a){return a?!e.includes(a):!1}}),A={default:()=>E.Yj().nullable(),max:()=>E.ai().integer().nullable(),min:()=>E.ai().integer().when("max",(e,a)=>e?a.max(e,(0,c.A)("error.validation.minSupMax")):a).nullable(),maxLength:()=>E.ai().integer().positive((0,c.A)("error.validation.positive")).nullable(),minLength:()=>E.ai().integer().min(0).when("maxLength",(e,a)=>e?a.max(e,(0,c.A)("error.validation.minSupMax")):a).nullable(),name(e,a){return E.Yj().test(ja(e)).test(na(a)).matches(Wa,y.iW.regex).required(y.iW.required)},required:()=>E.zM(),type:()=>E.Yj().required(y.iW.required),unique:()=>E.zM().nullable()},aa=(e,a)=>({name:A.name(e,a),type:A.type(),default:A.default(),unique:A.unique(),required:A.required(),maxLength:A.maxLength(),minLength:A.minLength(),regex:E.Yj().test({name:"isValidRegExpPattern",message:(0,c.A)("error.validation.regex"),test(r){return new RegExp(r)!==null}}).nullable()}),sa={name:"isMinSuperiorThanMax",message:(0,c.A)("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:a}=this.parent;return!a||Number.isNaN(ta()(e))?!0:ta()(a)>=ta()(e)}},oa={date(e,a){const o={name:A.name(e,a),type:A.type()};return E.Ik(o)},datetime(e,a){const o={name:A.name(e,a),type:A.type()};return E.Ik(o)},time(e,a){const o={name:A.name(e,a),type:A.type()};return E.Ik(o)},default(e,a){const o={name:A.name(e,a),type:A.type()};return E.Ik(o)},biginteger(e,a){const o={name:A.name(e,a),type:A.type(),default:E.Yj().nullable().matches(/^-?\d*$/),unique:A.unique(),required:A.required(),max:E.Yj().nullable().matches(/^-?\d*$/,y.iW.regex),min:E.Yj().nullable().test(sa).matches(/^-?\d*$/,y.iW.regex)};return E.Ik(o)},boolean(e,a){const o={name:A.name(e,a),default:E.zM().nullable(),required:A.required(),unique:A.unique()};return E.Ik(o)},component(e,a){const o={name:A.name(e,a),type:A.type(),required:A.required(),max:A.max(),min:A.min(),component:E.Yj().required(y.iW.required)};return E.Ik(o)},decimal(e,a){const o={name:A.name(e,a),type:A.type(),default:E.ai(),required:A.required(),max:E.ai(),min:E.ai().test(sa)};return E.Ik(o)},dynamiczone(e,a){const o={name:A.name(e,a),type:A.type(),required:A.required(),max:A.max(),min:A.min()};return E.Ik(o)},email(e,a){const o={name:A.name(e,a),type:A.type(),default:E.Yj().email().nullable(),unique:A.unique(),required:A.required(),maxLength:A.maxLength(),minLength:A.minLength()};return E.Ik(o)},enumeration(e,a){const o=/^[_A-Za-z][_0-9A-Za-z]*$/,r={name:E.Yj().test(ja(e)).test(na(a)).matches(o,y.iW.regex).required(y.iW.required),type:A.type(),default:A.default(),unique:A.unique(),required:A.required(),enum:E.YO().of(E.Yj()).min(1,y.iW.min).test({name:"areEnumValuesUnique",message:(0,c.A)("error.validation.enum-duplicate"),test(i){return!eo()(i.map(ea).filter((l,u,m)=>m.indexOf(l)!==u)).length}}).test({name:"doesNotHaveEmptyValues",message:(0,c.A)("error.validation.enum-empty-string"),test:i=>!i.map(ea).some(d=>d==="")}).test({name:"doesMatchRegex",message:(0,c.A)("error.validation.enum-regex"),test:i=>i.map(ea).every(d=>o.test(d))}),enumName:E.Yj().nullable()};return E.Ik(r)},float(e,a){const o={name:A.name(e,a),type:A.type(),required:A.required(),default:E.ai(),max:E.ai(),min:E.ai().test(sa)};return E.Ik(o)},integer(e,a){const o={name:A.name(e,a),type:A.type(),default:E.ai().integer(),unique:A.unique(),required:A.required(),max:A.max(),min:A.min()};return E.Ik(o)},json(e,a){const o={name:A.name(e,a),type:A.type(),required:A.required(),unique:A.unique()};return E.Ik(o)},media(e,a){const o={name:A.name(e,a),type:A.type(),multiple:E.zM(),required:A.required(),allowedTypes:E.YO().of(E.Yj().oneOf(["images","videos","files","audios"])).min(1).nullable()};return E.Ik(o)},password(e,a){const o={name:A.name(e,a),type:A.type(),default:A.default(),unique:A.unique(),required:A.required(),maxLength:A.maxLength(),minLength:A.minLength()};return E.Ik(o)},relation(e,a,o,{initialData:r,modifiedData:i}){const d={name:A.name(e,a),target:E.Yj().required(y.iW.required),relation:E.Yj().required(),type:E.Yj().required(),targetAttribute:E.RZ(()=>{const l=(0,Zn.A)(i.relation,i.targetAttribute);if(l==="oneWay"||l==="manyWay")return E.Yj().nullable();let u=E.Yj().test(na(a)),f=[...o.map(({name:g})=>g),i.name].filter(g=>g!==r.targetAttribute);return u.matches(Wa,y.iW.regex).test({name:"forbiddenTargetAttributeName",message:(0,c.A)("error.validation.relation.targetAttribute-taken"),test(g){return g?!f.includes(g):!1}}).required(y.iW.required)})};return E.Ik(d)},richtext(e,a){const o={name:A.name(e,a),type:A.type(),default:A.default(),unique:A.unique(),required:A.required(),maxLength:A.maxLength(),minLength:A.minLength()};return E.Ik(o)},string(e,a){const o=aa(e,a);return E.Ik(o)},text(e,a){const o=aa(e,a);return E.Ik(o)},uid(e,a){const o=aa(e,a);return E.Ik(o)}},so=({usedContentTypeNames:e=[],reservedModels:a=[],singularNames:o=[],pluralNames:r=[],collectionNames:i=[]})=>{const d={displayName:E.Yj().test({name:"nameAlreadyUsed",message:y.iW.unique,test(l){if(!l)return!1;const u=(0,st.X)(l);return!e.includes(u)}}).test({name:"nameNotAllowed",message:(0,c.A)("error.contentTypeName.reserved-name"),test(l){return l?!a.includes(l?.trim()?.toLowerCase()):!1}}).required(y.iW.required),pluralName:E.Yj().test({name:"pluralNameAlreadyUsed",message:y.iW.unique,test(l){return l?!r.includes(l):!1}}).test({name:"pluralNameAlreadyUsedAsSingular",message:(0,c.A)("error.contentType.pluralName-equals-singularName"),test(l){return l?!o.includes(l):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,c.A)("error.contentType.pluralName-used"),test(l,u){return l?u.parent.singularName!==l:!1}}).test({name:"pluralNameNotAllowed",message:(0,c.A)("error.contentTypeName.reserved-name"),test(l){return l?!a.includes(l?.trim()?.toLowerCase()):!1}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:(0,c.A)("error.contentType.pluralName-equals-collectionName"),test(l){return l?!i.includes(l?.trim()?.toLowerCase()):!1}}).required(y.iW.required),singularName:E.Yj().test({name:"singularNameAlreadyUsed",message:y.iW.unique,test(l){return l?!o.includes(l):!1}}).test({name:"singularNameAlreadyUsedAsPlural",message:(0,c.A)("error.contentType.singularName-equals-pluralName"),test(l){return l?!r.includes(l):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,c.A)("error.contentType.singularName-used"),test(l,u){return l?u.parent.pluralName!==l:!1}}).test({name:"singularNameNotAllowed",message:(0,c.A)("error.contentTypeName.reserved-name"),test(l){return l?!a.includes(l?.trim()?.toLowerCase()):!1}}).required(y.iW.required),draftAndPublish:E.zM(),kind:E.Yj().oneOf(["singleType","collectionType"]),reviewWorkflows:E.zM()};return E.Ik(d)},Ka={name:"displayName",type:"text",intlLabel:{id:(0,c.A)("contentType.displayName.label"),defaultMessage:"Display name"}},ia={advanced:{default(){return{sections:[{items:[{intlLabel:{id:(0,c.A)("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:(0,c.A)("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[Ka,{description:{id:(0,c.A)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,c.A)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:(0,c.A)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,c.A)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[Ka,{disabled:!0,description:{id:(0,c.A)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,c.A)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:(0,c.A)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,c.A)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:(0,c.A)("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:(0,c.A)("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:(0,c.A)("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:(0,c.A)("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},ra={advanced:{default(){return{sections:ot.advanced("componentToCreate.")}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[wn]},...ot.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[wn]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:(0,c.A)("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},$a=(e,a)=>{e.forEach(o=>{if(!("sectionTitle"in o)){a[0].items.push(o);return}a.push(o)})},za=(e,a)=>e.filter(({name:o})=>o!==a.initialData.name).map(({name:o})=>o),Ye={customField:{schema({schemaAttributes:e,attributeType:a,customFieldValidator:o,reservedNames:r,schemaData:i,ctbFormsAPI:d}){const l=za(e,i),u=oa[a](l,r.attributes);return d.makeCustomFieldValidator(u,o,l,r.attributes,i)},form:{base({customField:e}){const a=[{sectionTitle:null,items:[Ie]}];return e.options?.base&&$a(e.options.base,a),{sections:a}},advanced({customField:e,data:a,step:o,extensions:r,...i}){const d=[{sectionTitle:null,items:[]}],l=r.getAdvancedForm(["attribute",e.type],{data:a,type:e.type,step:o,...i});if(e.options?.advanced&&$a(e.options.advanced,d),l){const u={sectionTitle:{id:(0,c.A)("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:l};d.push(u)}return{sections:d}}}},attribute:{schema(e,a,o,r,i,d){const l=e?.schema?.attributes??[],u=za(l,i);try{let m=oa[a](u,o.attributes,r,i);return d.makeValidator(["attribute",a],m,u,o.attributes,r,i)}catch(m){return console.error("Error yup build schema",m),oa.default(u,o.attributes)}},form:{advanced({data:e,type:a,step:o,extensions:r,...i}){try{const d=Ua.advanced[a](e,o).sections,l=r.getAdvancedForm(["attribute",a],{data:e,type:a,step:o,...i});return{sections:d.reduce((m,f)=>(f.sectionTitle===null?m.push(f):m.push({...f,items:[...f.items,...l]}),m),[])}}catch(d){return console.error(d),{sections:[]}}},base({data:e,type:a,step:o,attributes:r}){try{return Ua.base[a](e,o,r)}catch{return _s}}}},contentType:{schema(e,a,o,r,i,d){const l=Object.values(d).map(v=>v.schema.singularName),u=Object.values(d).map(v=>v?.schema?.pluralName??""),m=a?e.filter(v=>v!==o):e,f=a?l.filter(v=>{const{schema:R}=d[o];return R.singularName!==v}):l,g=a?u.filter(v=>{const{schema:R}=d[o];return R.pluralName!==v}):u,p=Object.values(d).map(v=>v?.schema?.collectionName??""),T=a?p.filter(v=>{const{schema:R}=d[o],F=R.pluralName,M=R.collectionName;return v!==F||v!==M}):p,b=so({usedContentTypeNames:m,reservedModels:r.models,singularNames:f,pluralNames:g,collectionNames:T});return i.makeValidator(["contentType"],b,m,r.models,f,g)},form:{base({actionType:e}){return e==="create"?ia.base.create():ia.base.edit()},advanced({extensions:e}){const a=ia.advanced.default().sections.map(r=>r.items).flat(),o=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...a,...o]}]}}}},component:{schema(e,a,o,r=!1,i=null){const d=r?e.filter(l=>l!==i):e;return Qs(d,o.models,a)},form:{advanced(){return{sections:ot.advanced()}},base(){return{sections:ot.base()}}}},addComponentToDynamicZone:{form:{advanced(){return ra.advanced.default()},base({data:e}){return e?.createComponent??!1?ra.base.createComponent():ra.base.default()}}},editCategory:{schema(e,a){const o=e.filter(r=>r!==a.name).map(r=>r.toLowerCase());return Xs(o)},form:{advanced:()=>({sections:[]}),base(){return Js.base}}}};var Va=n(22325),oo=n(52691);const io=()=>e=>e[`${G.A}_formModal`]||oo.u,ro=()=>(0,Va.Mz)(io(),e=>e),lo=(e,a)=>{const o=D()(e,["contentType","schema","kind"],"");return o==="singleType"||o===a.kind?!0:D()(e,["contentType","schema","attributes"],[]).filter(({relation:d,type:l,targetAttribute:u})=>{const m=(0,Zn.A)(d,u);return l==="relation"&&!["oneWay","manyWay"].includes(m)}).length===0},co=(e="",a,o)=>{const r=["text","email","richtext","password","number","enumeration","date","media","boolean","json","relation"],i=e==="contentType",d=o.includes(a),l=!i&&!d;return i?[[...r,"uid"],["component","dynamiczone"]]:l?[r,["component"]]:[r]},Za=e=>e.reduce((a,o)=>{const r=o.items.reduce((i,d)=>(d.name&&i.push(d.name),i),[]);return[...a,...r]},[]),uo=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:a,onNavigateToAddCompoToDZModal:o,onNavigateToCreateComponentStep2:r,actionType:i,attributeName:d,attributeType:l,customFieldUid:u,categoryName:m,dynamicZoneTarget:f,forTarget:g,modalType:p,isOpen:T,showBackLink:b,kind:v,step:R,targetUid:F}=(0,Pe.A)(),M=(0,y.AC)().get(u),P=(0,t.useRef)(),I=(0,t.useMemo)(ro,[]),S=(0,Be.wA)(),q=(0,y.hN)(),de=(0,Be.d4)(K=>I(K),Be.bN),{push:ve}=(0,j.W6)(),{trackUsage:U}=(0,y.z1)(),{formatMessage:Ae}=(0,B.A)(),{getPlugin:_}=(0,y.vD)(),te=_(G.A).apis.forms,ee=te.components.inputs,{addAttribute:Ne,addCustomFieldAttribute:ce,addCreatedComponentToDynamicZone:Y,allComponentsCategories:C,changeDynamicZoneComponents:da,contentTypes:it,components:Ct,createSchema:rt,deleteCategory:ca,deleteData:kt,editCategory:ua,editCustomFieldAttribute:ma,submitData:pa,modifiedData:pe,nestedComponents:ga,setModifiedData:fa,sortedContentTypesList:ya,updateSchema:Gt,reservedNames:He}=(0,Q.A)(),{componentToCreate:Rt,formErrors:Ue,initialData:se,isCreatingComponentWhileAddingAField:Ot,modifiedData:h}=de,O=g==="contentType"||g==="component"?[g]:[g,F];(0,t.useEffect)(()=>{if(T){const K=ya.filter(Ft);p==="editCategory"&&fa(),i==="edit"&&p==="attribute"&&g==="contentType"&&U("willEditFieldOfContentType");const Te=[...O,"schema","attributes"],Oe=ut(D()(pe,Te,[]),f)||null;if(p==="editCategory"&&i==="edit"&&S({type:w.jN,modalType:p,actionType:i,data:{name:m}}),p==="contentType"&&i==="create"&&S({type:w.jN,modalType:p,actionType:i,data:{draftAndPublish:!0},pluginOptions:{}}),p==="contentType"&&i==="edit"){const{displayName:V,draftAndPublish:oe,kind:De,pluginOptions:fe,pluralName:si,reviewWorkflows:oi,singularName:ii}=D()(pe,[...O,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});S({type:w.jN,actionType:i,modalType:p,data:{displayName:V,draftAndPublish:oe,kind:De,pluginOptions:fe,pluralName:si,reviewWorkflows:oi??!1,singularName:ii}})}if(p==="component"&&i==="edit"){const V=D()(pe,O,{});S({type:w.jN,actionType:i,modalType:p,data:{displayName:V.schema.displayName,category:V.category,icon:V.schema.icon}})}if(p==="addComponentToDynamicZone"&&i==="edit"){const V={...Oe,components:[],name:f,createComponent:!1,componentToCreate:{type:"component"}};S({type:w.Tb,attributeToEdit:V})}if(l){const oe={...ut(D()(pe,Te,[]),d),name:d};l==="component"&&i==="edit"&&(oe.repeatable||Pt()(oe,"repeatable",!1)),S(p==="customField"?{type:w.t_,customField:M,isEditing:i==="edit",modifiedDataToSetForEditing:oe,forTarget:g}:{type:w.LV,attributeType:l,nameToSetForRelation:D()(K,["0","title"],"error"),targetUid:D()(K,["0","uid"],"error"),isEditing:i==="edit",modifiedDataToSetForEditing:oe,step:R,forTarget:g})}}else S({type:w.BO})},[i,d,l,m,f,g,T,p]);const W=p==="contentType",ne=p==="component",ge=p==="attribute",be=p==="customField",We=l==="component"&&ge,Qe=i==="create",ke=D()(h,"createComponent",!1)||Ot,lt=R==="1",ts=p==="editCategory",ns=p==="chooseAttribute",ha=(0,st.X)(h.displayName||""),Aa=D()(pe,[...O,"schema","attributes"],null),Yo=async()=>{let K;const Te=ke&&R==="1"?D()(h,"componentToCreate",{}):h;if(W)K=Ye.contentType.schema(Object.keys(it),i==="edit",D()(pe,[...O,"uid"],null),He,te,it);else if(ne)K=Ye.component.schema(Object.keys(Ct),h.category||"",He,i==="edit",D()(pe,[...O,"uid"],null),te);else if(be)K=Ye.customField.schema({schemaAttributes:D()(pe,[...O,"schema","attributes"],[]),attributeType:M.type,reservedNames:He,schemaData:{modifiedData:h,initialData:se},ctbFormsAPI:te,customFieldValidator:M.options?.validator});else if(We&&ke&&lt)K=Ye.component.schema(Object.keys(Ct),D()(h,"componentToCreate.category",""),He,te);else if(ge&&!lt){const Oe=l==="relation"?"relation":h.type;let V=[];if(Oe==="relation"){const oe=D()(h,["target"],null);V=D()(it,[oe,"schema","attributes"],[]).filter(({name:fe})=>i!=="edit"?!0:fe!==se.targetAttribute)}K=Ye.attribute.schema(D()(pe,O,{}),Oe,He,V,{modifiedData:h,initialData:se},te)}else if(ts)K=Ye.editCategory.schema(C,se,te);else if(lt&&ke)K=Ye.component.schema(Object.keys(Ct),D()(h,"componentToCreate.category",""),He,te);else return;await K.validate(Te,{abortEarly:!1})},as=(0,t.useCallback)(({target:{name:K,value:Te,type:Oe,...V}})=>{const oe=["enumName","max","min","maxLength","minLength","regex","default"];let De;oe.includes(K)&&Te===""?De=null:De=Te;const fe=Object.assign({},Ue);K==="max"&&delete fe.min,K==="maxLength"&&delete fe.minLength,delete fe[K],S({type:w.Lg,errors:fe}),S({type:w.pO,keys:K.split("."),value:De,...V})},[S,Ue]),Re=async(K,Te=Qe)=>{K.preventDefault();try{await Yo(),Go(Te);const Oe=g==="components"?F:ha;if(W)if(Qe)rt({...h,kind:v},p,ha),ve({pathname:`/plugins/${G.A}/content-types/${ha}`}),a({forTarget:g,targetUid:Oe});else{lo(pe,h)?(e(),pa(h)):q({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(p==="component")if(Qe){const V=(0,st.A)(h.displayName,h.category),{category:oe,...De}=h;rt(De,"component",V,oe),ve({pathname:`/plugins/${G.A}/component-categories/${oe}/${V}`}),a({forTarget:g,targetUid:V})}else{Gt(h,p,F),e();return}else if(ts){if(It()(se.name)===It()(h.name)){e();return}ua(se.name,h);return}else if(be){const V={attributeToSet:{...h,customField:u},forTarget:g,targetUid:F,initialAttribute:se};i==="edit"?ma(V):ce(V),Te?a({forTarget:g,targetUid:Oe}):e();return}else if(ge&&!ke){if(l==="dynamiczone"){Ne(h,g,F,i==="edit",se),Qe?(S({type:w.b5}),P.current._handlers.setSelectedTabIndex(0),o({dynamicZoneTarget:h.name})):e();return}if(!We){Ne(h,g,F,i==="edit",se),Te?a({forTarget:g,targetUid:Oe}):e();return}if(lt){r(),S({type:w.gV,forTarget:g});return}Ne(h,g,F,i==="edit",se,!0),Te?a({forTarget:g,targetUid:F}):e()}else if(ge&&ke){if(lt){U("willCreateComponentFromAttributesModal"),S({type:w.wX,forTarget:g}),r();return}const{category:V,type:oe,...De}=Rt,fe=(0,st.A)(Rt.displayName,V);rt(De,oe,fe,V,ke),Ne(h,g,F,!1),S({type:w.BO}),Te?a({forTarget:"components",targetUid:fe}):e();return}else{if(lt)if(ke){const{category:V,type:oe,...De}=h.componentToCreate,fe=(0,st.A)(h.componentToCreate.displayName,V);rt(De,oe,fe,V,ke),Y(f,[fe]),a({forTarget:"components",targetUid:fe})}else da(f,h.components),e();else console.error("This case is not handled");return}S({type:w.BO})}catch(Oe){const V=(0,y.ed)(Oe);console.log({err:Oe,errors:V}),S({type:w.Lg,errors:V})}},Ho=()=>{window.confirm(Ae({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),S({type:w.BO}))},ss=()=>{Xe()(h,se)?(e(),S({type:w.BO})):Ho()},ko=K=>{if(K==="advanced"){if(W){U("didSelectContentTypeSettings");return}g==="contentType"&&U("didSelectContentTypeFieldSettings")}},Go=K=>{p==="attribute"&&g==="contentType"&&l!=="dynamiczone"&&K&&U("willAddMoreFieldToContentType")},qo=()=>!!(p==="editCategory"||p==="component"||ln()(h,"createComponent")),_o=co(g,F,ga);if(!T||!p)return null;const os=D()(Ye,[p,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),Xo=g==="components"||g==="component",is={customInputs:{"allowed-types-select":un,"boolean-radio-group":xn,"checkbox-with-number-field":In,"icon-picker":Ms,"content-type-radio-group":Fn,"radio-group":At,relation:js,"select-category":zs,"select-component":Vs,"select-components":Zs,"select-default-boolean":Dn,"select-number":Hs,"select-date":Ys,"toggle-draft-publish":Sn,"text-plural":Ts,"text-singular":ks,"textarea-enum":qs,...ee},componentToCreate:Rt,dynamicZoneTarget:f,formErrors:Ue,isAddingAComponentToAnotherComponent:Xo,isCreatingComponentWhileAddingAField:Ot,mainBoxHeader:D()(pe,[...O,"schema","displayName"],""),modifiedData:h,naturePickerType:g,isCreating:Qe,targetUid:F,forTarget:g},rs=os.advanced({data:h,type:l,step:R,actionType:i,attributes:Aa,extensions:te,forTarget:g,contentTypeSchema:pe.contentType||{},customField:M}).sections,ls=os.base({data:h,type:l,step:R,actionType:i,attributes:Aa,extensions:te,forTarget:g,contentTypeSchema:pe.contentType||{},customField:M}).sections,Jo=Za(ls),Qo=Za(rs),wo=Object.keys(Ue).some(K=>Jo.includes(K)),ei=Object.keys(Ue).some(K=>Qo.includes(K)),ti=D()(it,[F,"schema","kind"]),ni=()=>i==="edit"&&Aa.every(({name:K})=>K!==h?.name),ai=()=>{ni()&&U("didEditFieldNameOnContentType")};return t.createElement(sn.k,{onClose:ss,labelledBy:"title"},t.createElement(ds,{actionType:i,attributeName:d,categoryName:m,contentTypeKind:v,dynamicZoneTarget:f,modalType:p,forTarget:g,targetUid:F,attributeType:l,customFieldUid:u,showBackLink:b}),ns&&t.createElement(On,{attributes:_o,forTarget:g,kind:ti||"collectionType"}),!ns&&t.createElement("form",{onSubmit:Re},t.createElement(xt.c,null,t.createElement(Lt.f,{label:"todo",id:"tabs",variant:"simple",ref:P,onTabChange:K=>{K===1&&ko("advanced")}},t.createElement(L.s,{justifyContent:"space-between"},t.createElement(us,{actionType:i,forTarget:g,kind:v,step:R,modalType:p,attributeType:l,attributeName:d,customField:M}),t.createElement(Ve.t,null,t.createElement(Ve.o,{hasError:wo},Ae({id:(0,c.A)("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})),t.createElement(Ve.o,{hasError:ei,disabled:qo()},Ae({id:(0,c.A)("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})))),t.createElement(ct.c,null),t.createElement(N.a,{paddingTop:6},t.createElement(Ze.T,null,t.createElement(Ze.K,null,t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:6},t.createElement(Ba,{form:ls,formErrors:Ue,genericInputProps:is,modifiedData:h,onChange:as}))),t.createElement(Ze.K,null,t.createElement(L.s,{direction:"column",alignItems:"stretch",gap:6},t.createElement(Ba,{form:rs,formErrors:Ue,genericInputProps:is,modifiedData:h,onChange:as}))))))),t.createElement(on.j,{endActions:t.createElement(Bn,{deleteCategory:ca,deleteContentType:kt,deleteComponent:kt,categoryName:se.name,isAttributeModal:p==="attribute",isCustomFieldModal:p==="customField",isComponentToDzModal:p==="addComponentToDynamicZone",isComponentAttribute:l==="component",isComponentModal:p==="component",isContentTypeModal:p==="contentType",isCreatingComponent:i==="create",isCreatingDz:i==="create",isCreatingComponentAttribute:h.createComponent||!1,isCreatingComponentInDz:h.createComponent||!1,isCreatingComponentWhileAddingAField:Ot,isCreatingContentType:i==="create",isEditingAttribute:i==="edit",isDzAttribute:l==="dynamiczone",isEditingCategory:p==="editCategory",isInFirstComponentStep:R==="1",onSubmitAddComponentAttribute:Re,onSubmitAddComponentToDz:Re,onSubmitCreateComponent:Re,onSubmitCreateContentType:Re,onSubmitCreateDz:Re,onSubmitEditAttribute:Re,onSubmitEditCategory:Re,onSubmitEditComponent:Re,onSubmitEditContentType:Re,onSubmitEditCustomFieldAttribute:Re,onSubmitEditDz:Re,onClickFinish:ai}),startActions:t.createElement(X.$,{variant:"tertiary",onClick:ss},Ae({id:"app.components.Button.cancel",defaultMessage:"Cancel"}))})))};var le=n(34389),mo=n(13524);const po=()=>e=>e[`${G.A}_dataManagerProvider`]||mo.u,go=()=>(0,Va.Mz)(po(),e=>e);var fo=n(84058),yo=n.n(fo),ho=n(90179),Ya=n.n(ho),Ao=n(33031),Eo=n.n(Ao);const vo=(e,a)=>{const o=Object.keys(e).filter(r=>{const i=D()(e,r,{}),d=D()(a,r,{}),l=D()(i,["isTemporary"],!1),u=!Xe()(i,d);return l||u});return(0,ze.A)(o)},Mo=(e,a)=>{const o=ka(D()(e,"schema.attributes",[]),a),r=D()(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},r,{category:e.category},Ya()(e.schema,"attributes"),{attributes:o})},Ha=(e,a=!1)=>{const o=D()(e,"uid",null),r=ka(D()(e,"schema.attributes",[]),o),i=a?{category:D()(e,"category","")}:{},d=Object.assign(i,Ya()(e.schema,"attributes"),{attributes:r});return delete d.uid,delete d.isTemporary,delete d.visible,delete d.restrictRelationsTo,d},ka=(e,a)=>e.reduce((o,{name:r,...i})=>{const d=i,l=d.target===a,u=d.type==="relation",m=D()(d,"targetAttribute",null);if(!l)if(u){const f=Object.assign({},d,{targetAttribute:Ga(m)});o[r]=Ht(f)}else o[r]=Ht(d);if(l){const f=d.target,g=Object.assign({},d,{target:f,targetAttribute:Ga(m)});o[r]=Ht(g)}if(d.customField){const f={...d,type:"customField"};o[r]=Ht(f)}return o},{}),Ga=e=>e==="-"?null:e,Ht=e=>Object.keys(e).reduce((a,o)=>(e[o]!==null&&o!=="plugin"&&(a[o]=e[o]),a),{}),bo=(e,a,o,r=!1)=>vo(e,a).map(l=>{const u=D()(e,l,{});return Mo(u,o,r)}),To=e=>Eo()(Object.keys(e).map(a=>({visible:e[a].schema.visible,name:a,title:e[a].schema.displayName,plugin:e[a].plugin||null,uid:a,to:`/plugins/${G.A}/content-types/${a}`,kind:e[a].schema.kind,restrictRelationsTo:e[a].schema.restrictRelationsTo})).filter(a=>a!==null),a=>yo()(a.title)),qa=e=>e.reduce((a,o)=>(a[o.uid]=o,a),{}),Co=(e,a,o,r)=>{const i=a.reduce((u,m)=>{const f=D()(o,m,{});return u[m]=f,u},{});return{[r?"contentType":"component"]:e,components:i}},Ro=e=>Object.keys(e).reduce((a,o)=>{const r=e[o].schema;return a[o]={...e[o],schema:{...r,attributes:Oo(r.attributes)}},a},{}),Oo=e=>Object.keys(e).reduce((a,o)=>(a.push({...e[o],name:o}),a),[]),_a=Ro;var Do=n(88507);const Po=e=>{const a=Object.keys(e).reduce((o,r)=>{const i=D()(e,[r],{}),d=i.uid;return xo(i)&&o.push(d),o},[]);return(0,ze.A)(a)},xo=e=>D()(e,["schema","attributes"],[]).some(o=>{const{type:r}=o;return r==="component"}),Lo=e=>{const a=Object.keys(e).reduce((o,r)=>{const i=e?.[r]?.schema?.attributes??[],d=Io(i);return[...o,...d]},[]);return(0,ze.A)(a)},Io=e=>e.reduce((a,o)=>{const{type:r,component:i}=o;return r==="component"&&a.push(i),a},[]),Xa=Lo,Fo=(e,a)=>{const o=Object.keys(e).map(r=>D()(e,[r,...a],""));return(0,ze.A)(o)},Ja="did-not-kill-server",So="server is down";function Tt(e,a){return new Promise(o=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":!1}}).then(r=>{if(r.status>=400)throw new Error(So);if(!a)throw new Error(Ja);o(e)}).catch(r=>{setTimeout(()=>Tt(e,r.message!==Ja).then(o),100)})})}const Bo=e=>Object.values(e.attributes).filter(({type:o})=>o==="dynamiczone").every(({components:o})=>Array.isArray(o)&&o.length>0),la=({children:e,components:a,contentTypes:o,isLoading:r,isLoadingForDataToBeSet:i,initialData:d,modifiedData:l,reservedNames:u})=>{const m=(0,Be.wA)(),f=(0,y.hN)(),{lockAppWithAutoreload:g,unlockAppWithAutoreload:p}=(0,y.Ip)(),{setCurrentStep:T}=(0,y.Cx)(),{getPlugin:b}=(0,y.vD)(),{apis:v}=b(G.A),{autoReload:R}=(0,y.Xe)(),{formatMessage:F}=(0,B.A)(),{trackUsage:M}=(0,y.z1)(),{refetchPermissions:P}=(0,y.r5)(),{pathname:I}=(0,j.zy)(),{onCloseModal:S}=(0,Pe.A)(),q=(0,j.W5)(`/plugins/${G.A}/content-types/:uid`),de=(0,j.W5)(`/plugins/${G.A}/component-categories/:categoryUid/:componentUid`),ve=(0,y.ry)(),{put:U,post:Ae,del:_}=ve,Me=(0,t.useRef)();Me.current=F;const te=R,ee=q!==null,Ne=ee?"contentType":"component",ce=ee?D()(q,"params.uid",null):D()(de,"params.componentUid",null),Y=(0,t.useRef)(),C=ee?"content-types":"components";Y.current=async()=>{try{const[{data:{data:h}},{data:{data:O}},{data:W}]=await Promise.all(["components","content-types","reserved-names"].map(Qe=>ve.get(`/${G.A}/${Qe}`))),ne=qa(h),ge=_a(ne),be=qa(O),We=_a(be);m({type:le.yX,components:ge,contentTypes:We,reservedNames:W})}catch(h){console.error({err:h}),f({type:"warning",message:{id:"notification.error"}})}},(0,t.useEffect)(()=>(Y.current(),()=>{m({type:le.id})}),[]),(0,t.useEffect)(()=>{!r&&ce&&Gt()},[r,I,ce]),(0,t.useEffect)(()=>{R||f({type:"info",message:{id:(0,c.A)("notification.info.autoreaload-disable")}})},[R,f]);const da=(h,O,W,ne=!1,ge,be=!1)=>{const We=ne?le.og:le.LA;m({type:We,attributeToSet:h,forTarget:O,targetUid:W,initialAttribute:ge,shouldAddComponentToData:be})},it=({attributeToSet:h,forTarget:O,targetUid:W,initialAttribute:ne})=>{m({type:le.gY,attributeToSet:h,forTarget:O,targetUid:W,initialAttribute:ne})},Ct=({attributeToSet:h,forTarget:O,targetUid:W,initialAttribute:ne})=>{m({type:le.hM,attributeToSet:h,forTarget:O,targetUid:W,initialAttribute:ne})},rt=(h,O)=>{m({type:le.Kf,dynamicZoneTarget:h,componentsToAdd:O})},ca=(h,O,W,ne,ge=!1)=>{const be=O==="contentType"?le.nr:le.nT;m({type:be,data:h,componentCategory:ne,schemaType:O,uid:W,shouldAddComponentToData:ge})},kt=(h,O)=>{m({type:le.NJ,dynamicZoneTarget:h,newComponents:O})},ua=(h,O,W="")=>{const ne=h==="components"?le.HK:le.KB;h==="contentType"&&M("willDeleteFieldOfContentType"),m({type:ne,mainDataKey:h,attributeToRemoveName:O,componentUid:W})},ma=async h=>{try{const O=`/${G.A}/component-categories/${h}`,W=window.confirm(F({id:(0,c.A)("popUpWarning.bodyMessage.category.delete")}));S(),W&&(g(),await _(O),await Tt(!0),await p(),await se())}catch(O){console.error({err:O}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},pa=async()=>{try{const h=`/${G.A}/${C}/${ce}`,O=D()(l,[Ne,"isTemporary"],!1),W=window.confirm(F({id:(0,c.A)(`popUpWarning.bodyMessage.${ee?"contentType":"component"}.delete`)}));if(S(),W){if(O){m({type:le.j$});return}g(),await _(h),await Tt(!0),await p(),await se()}}catch(h){console.error({err:h}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},pe=async(h,O)=>{try{const W=`/${G.A}/component-categories/${h}`;S(),g(),await U(W,O),await Tt(!0),await p(),await se()}catch(W){console.error({err:W}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},ga=()=>{const h=Object.assign({},a,l.components);if(!ee){const W=D()(l,"component",{});Pt()(h,D()(W,["uid"],""),W)}const O=Po(h);return(0,ze.A)(O)},fa=()=>{const h=Xa(a),O=Xa(l.components||{});return(0,ze.A)([...O,...h])},ya=(h,O)=>{m({type:le.lj,dzName:h,componentToRemoveIndex:O})},Gt=()=>{const h=ee?o:a,O=D()(h,ce,{schema:{attributes:[]}}),W=(0,Do.A)(O.schema.attributes,a),ne=Co(O,W,a,ee),ge=D()(O,"isTemporary",!1)&&en()(D()(O,"schema.attributes",[]))===0;m({type:le.S0,schemaToSet:ne,hasJustCreatedSchema:ge})},He=(0,t.useMemo)(()=>{const h=ee?o:a;return ce==="create-content-type"?!1:!Object.keys(h).includes(ce)&&!r},[a,o,ce,ee,r]),Rt=(0,t.useMemo)(()=>{const h=Object.keys(o).filter(O=>D()(o,[O,"schema","visible"],!0)).sort();return D()(h,"0","create-content-type")},[o]);if(He)return t.createElement(j.rd,{to:`/plugins/${G.A}/content-types/${Rt}`});const Ue=async h=>{try{const O=D()(l,[Ne,"isTemporary"],!1),W={components:bo(l.components,a,ce,O)};if(ee){const be=v.forms.mutateContentTypeSchema({...Ha(l.contentType),...h},d.contentType);if(!Bo(be)){f({type:"warning",message:{id:(0,c.A)("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}W.contentType=be,M("willSaveContentType")}else W.component=Ha(l.component,!0),M("willSaveComponent");g();const ne=`/${G.A}/${C}`,ge=O?ne:`${ne}/${ce}`;if(O?await Ae(ge,W):await U(ge,W),await Tt(!0),await p(),O&&(d.contentType?.schema.kind==="collectionType"||d.contentType?.schema.kind==="singleType")&&T("contentTypeBuilder.success"),ee){M("didSaveContentType");const be=D()(W,["contentType","schema","name"],""),We=D()(d,["contentType","schema","name"],"");!O&&be!==We&&M("didEditNameOfContentType")}else M("didSaveComponent");await se()}catch(O){ee||M("didNotSaveComponent"),console.error({err:O.response}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}},se=async()=>{await P()},Ot=(h,O,W)=>{m({type:le.k6,data:h,schemaType:O,uid:W})};return t.createElement(an.A.Provider,{value:{addAttribute:da,addCustomFieldAttribute:it,addCreatedComponentToDynamicZone:rt,allComponentsCategories:Fo(a,["category"]),changeDynamicZoneComponents:kt,components:a,componentsGroupedByCategory:Jt()(a,"category"),componentsThatHaveOtherComponentInTheirAttributes:ga(),contentTypes:o,createSchema:ca,deleteCategory:ma,deleteData:pa,editCategory:pe,editCustomFieldAttribute:Ct,isInDevelopmentMode:te,initialData:d,isInContentTypeView:ee,modifiedData:l,nestedComponents:fa(),removeAttribute:ua,removeComponentFromDynamicZone:ya,reservedNames:u,setModifiedData:Gt,sortedContentTypesList:To(o),submitData:Ue,updateSchema:Ot}},i?t.createElement(y.Bl,null):t.createElement(t.Fragment,null,e,te&&t.createElement(uo,null)))};la.defaultProps={components:{}},la.propTypes={children:s().node.isRequired,components:s().object,contentTypes:s().object.isRequired,isLoading:s().bool.isRequired,isLoadingForDataToBeSet:s().bool.isRequired,initialData:s().object.isRequired,modifiedData:s().object.isRequired,reservedNames:s().object.isRequired};const No=go(),Uo=(0,Be.Ng)(No,null),Wo=(0,nn.compose)(Uo)((0,t.memo)(la));var jo=n(58329);const Qa={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null},wa=({children:e})=>{const[a,o]=(0,t.useState)(Qa),{trackUsage:r}=(0,y.z1)(),i=({attributeType:M,customFieldUid:P})=>{o(I=>({...I,actionType:"create",modalType:"customField",attributeType:M,customFieldUid:P}))},d=({attributeType:M,step:P})=>{a.forTarget==="contentType"&&r("didSelectContentTypeFieldType",{type:M}),o(I=>({...I,actionType:"create",modalType:"attribute",step:P,attributeType:M,showBackLink:!0}))},l=({dynamicZoneTarget:M,targetUid:P})=>{o(I=>({...I,dynamicZoneTarget:M,targetUid:P,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},u=({forTarget:M,targetUid:P})=>{o(I=>({...I,actionType:"create",forTarget:M,targetUid:P,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1}))},m=M=>{o(P=>({...P,...M,isOpen:!0}))},f=M=>{o(P=>({...P,categoryName:M,actionType:"edit",modalType:"editCategory",isOpen:!0}))},g=({forTarget:M,targetUid:P,attributeName:I,attributeType:S,customFieldUid:q})=>{o(de=>({...de,modalType:"customField",customFieldUid:q,actionType:"edit",forTarget:M,targetUid:P,attributeName:I,attributeType:S,isOpen:!0}))},p=({forTarget:M,targetUid:P,attributeName:I,attributeType:S,step:q})=>{o(de=>({...de,modalType:"attribute",actionType:"edit",forTarget:M,targetUid:P,attributeName:I,attributeType:S,step:q,isOpen:!0}))},T=({modalType:M,forTarget:P,targetUid:I,kind:S})=>{o(q=>({...q,modalType:M,actionType:"edit",forTarget:P,targetUid:I,kind:S,isOpen:!0}))},b=()=>{o(Qa)},v=({forTarget:M,targetUid:P})=>{o(I=>({...I,forTarget:M,targetUid:P,modalType:"chooseAttribute"}))},R=()=>{o(M=>({...M,attributeType:"component",modalType:"attribute",step:"2"}))},F=({dynamicZoneTarget:M})=>{o(P=>({...P,dynamicZoneTarget:M,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return t.createElement(jo.A.Provider,{value:{...a,onClickSelectField:d,onClickSelectCustomField:i,onCloseModal:b,onNavigateToChooseAttributeModal:v,onNavigateToAddCompoToDZModal:F,onOpenModalAddComponentsToDZ:l,onNavigateToCreateComponentStep2:R,onOpenModalAddField:u,onOpenModalCreateSchema:m,onOpenModalEditCategory:f,onOpenModalEditField:p,onOpenModalEditCustomField:g,onOpenModalEditSchema:T,setFormModalNavigationState:o}},e)};wa.propTypes={children:s().node.isRequired};const Ko=wa;var $o=n(29661);const zo=(0,t.lazy)(()=>n.e(5472).then(n.bind(n,72019))),Vo=()=>{const{url:e}=(0,j.W5)(),{categoryUid:a}=(0,j.g)();return t.createElement(t.Suspense,{fallback:t.createElement(y.Bl,null)},t.createElement(j.dO,null,t.createElement(j.qh,{path:`${e}/:componentUid`},t.createElement(zo,{categoryId:a}))))},es=(0,t.lazy)(()=>n.e(5472).then(n.bind(n,72019))),Zo=()=>{const{formatMessage:e}=(0,B.A)(),a=e({id:`${G.A}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:o}=(0,y.Cx)(),r=(0,t.useRef)(o);return(0,t.useEffect)(()=>{r.current&&r.current("contentTypeBuilder")},[]),t.createElement(y.kz,{permissions:$o.J.main},t.createElement(Z.m,{title:a}),t.createElement(Ko,null,t.createElement(Wo,null,t.createElement(k.P,{sideNav:t.createElement(qt,null)},t.createElement(t.Suspense,{fallback:t.createElement(y.Bl,null)},t.createElement(j.dO,null,t.createElement(j.qh,{path:`/plugins/${G.A}/content-types/create-content-type`,component:es}),t.createElement(j.qh,{path:`/plugins/${G.A}/content-types/:uid`,component:es}),t.createElement(j.qh,{path:`/plugins/${G.A}/component-categories/:categoryUid`,component:Vo})))))))}},45489:(ie,H,n)=>{"use strict";n.d(H,{A:()=>y});var t=n(69284);const y=Z=>`${t.A}.${Z}`},81437:(ie,H,n)=>{var t=n(72552),k=n(40346),y="[object RegExp]";function Z(B){return k(B)&&t(B)==y}ie.exports=Z},69607:(ie,H,n)=>{var t=n(81437),k=n(27301),y=n(86009),Z=y&&y.isRegExp,B=Z?k(Z):t;ie.exports=B},92516:(ie,H,n)=>{var t=n(77556),k=n(28754),y=n(49698),Z=n(23805),B=n(69607),j=n(81993),N=n(63912),ae=n(61489),re=n(13222),xe=30,Ge="...",qe=/\w*$/;function je($,ye){var J=xe,Ce=Ge;if(Z(ye)){var L="separator"in ye?ye.separator:L;J="length"in ye?ae(ye.length):J,Ce="omission"in ye?t(ye.omission):Ce}$=re($);var z=$.length;if(y($)){var Le=N($);z=Le.length}if(J>=z)return $;var ue=J-j(Ce);if(ue<1)return Ce;var me=Le?k(Le,0,ue).join(""):$.slice(0,ue);if(L===void 0)return me+Ce;if(Le&&(ue+=me.length-ue),B(L)){if($.slice(ue).search(L)){var Fe,Ke=me;for(L.global||(L=RegExp(L.source,re(qe.exec(L))+"g")),L.lastIndex=0;Fe=L.exec(Ke);)var he=Fe.index;me=me.slice(0,he===void 0?ue:he)}}else if($.indexOf(t(L),ue)!=ue){var Se=me.lastIndexOf(L);Se>-1&&(me=me.slice(0,Se))}return me+Ce}ie.exports=je},81994:(ie,H,n)=>{"use strict";n.d(H,{B:()=>Z});var t=n(74848),k=n(40948),y=n(50497);const Z=({options:j,...N})=>(0,t.jsx)(y.KF,{...N,children:j.map(ae=>"children"in ae?(0,t.jsx)(y.np,{label:ae.label,values:ae.children.map(re=>re.value.toString()),children:ae.children.map(re=>(0,t.jsx)(B,{value:re.value,children:re.label},re.value))},ae.label):(0,t.jsx)(y.fe,{value:ae.value,children:ae.label},ae.value))}),B=(0,k.Ay)(y.fe)`
  padding-left: ${({theme:j})=>j.spaces[7]};
`},52989:(ie,H,n)=>{"use strict";n.d(H,{A:()=>y});var t=n(74848);const k=Z=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...Z,children:[(0,t.jsx)("path",{fill:"#212134",d:"M11.987 23.036v-.964H1.876V1.876h10.111V0H0v24h11.987v-.964Z"}),(0,t.jsx)("path",{fill:"#212134",d:"M8 11.2c0-.11.09-.2.2-.2h11.973l-5.445-5.445a.2.2 0 0 1 0-.283l1.13-1.13a.2.2 0 0 1 .283 0l7.718 7.717a.2.2 0 0 1 0 .282L16.14 19.86a.2.2 0 0 1-.282 0l-1.13-1.13a.2.2 0 0 1 0-.284L20.172 13H8.2a.2.2 0 0 1-.2-.2v-1.6Z"})]}),y=k},33566:(ie,H,n)=>{"use strict";n.d(H,{A:()=>y});var t=n(74848);const k=Z=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...Z,children:(0,t.jsx)("path",{fill:"#212134",fillRule:"evenodd",d:"M23.707.297A1 1 0 0 0 23 .004h-2a13.907 13.907 0 0 0-5.38 1.077 1 1 0 0 0-.615.923V4.92a.035.035 0 0 1-.022.038l-2-1.47a1 1 0 0 0-1.265.052A14 14 0 0 0 7 14.004v1.585l-2.707 2.707a1 1 0 1 0 1.415 1.415l2.707-2.708H10a14.014 14.014 0 0 0 14-14v-2a1 1 0 0 0-.293-.706ZM18 23.999H3a3 3 0 0 1-3-3V6A3 3 0 0 1 3 3h3a1 1 0 1 1 0 2H3a1 1 0 0 0-1 1v15a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3Z",clipRule:"evenodd"})}),y=k}}]);
