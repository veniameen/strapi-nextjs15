"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[2225],{14459:(L,m,t)=>{t.d(m,{M:()=>u});var e=t(96540),n=t(91616),o=t(5556),g=t.n(o),E=t(34297);function c(f,r,a){if(!f||!r)return{display:"none"};const{x:s,y:l}=a;return{transform:`translate(${s}px, ${l}px)`}}function u({renderItem:f}){const{itemType:r,isDragging:a,item:s,initialOffset:l,currentOffset:y,mouseOffset:T}=(0,E.useDragLayer)(h=>({item:h.getItem(),itemType:h.getItemType(),initialOffset:h.getInitialSourceClientOffset(),currentOffset:h.getSourceClientOffset(),isDragging:h.isDragging(),mouseOffset:h.getClientOffset()}));return a?e.createElement(n.a,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},e.createElement(n.a,{style:c(l,y,T)},f({type:r,item:s}))):null}u.propTypes={renderItem:g().func.isRequired}},20022:(L,m,t)=>{t.d(m,{b:()=>g});var e=t(96540),n=t(78320),o=t(75942);function g({enabled:E}={enabled:!0}){const{get:c}=(0,n.ry)(),{data:u,isError:f,isLoading:r}=(0,o.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:l}}=await c("/admin/license-limit-information");return l},{enabled:E}),a=e.useMemo(()=>u??{},[u]),s=e.useCallback(l=>(a?.features??[]).find(T=>T.name===l)?.options??{},[a?.features]);return{license:a,getFeature:s,isError:f,isLoading:r}}},89974:(L,m,t)=>{t.d(m,{kc:()=>C,nh:()=>I,Y9:()=>v,bL:()=>P});var e=t(96540),n=t(63214),o=t(71808),g=t(40121),E=t(7562),c=t(78320),u=t(40009),f=t(6442),r=t(14459),a=t(11714),s=t(98016),l=t(97939),y=t(77044),T=t(5556),h=t.n(T),S=t(40948);const W=(0,S.Ay)(s.s)`
  svg path {
    fill: ${({theme:w})=>w.colors.neutral600};
  }
`;function O({name:w}){return e.createElement(s.s,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,c.a8)(300)},e.createElement(W,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},e.createElement(y.A,{width:`${8/16}rem`})),e.createElement(l.o,{fontWeight:"bold"},w))}O.propTypes={name:h().string.isRequired};function R({type:w,item:p}){switch(w){case a.TE.STAGE:return e.createElement(O,{...p});default:return null}}function I(){return e.createElement(r.M,{renderItem:R})}function P({children:w}){return e.createElement(n.P,null,e.createElement(o.g,{tabIndex:-1},e.createElement(g.s,null,w)))}function C({href:w}){const{formatMessage:p}=(0,f.A)();return e.createElement(c.N_,{startIcon:e.createElement(u.A,null),to:w},p({id:"global.back",defaultMessage:"Back"}))}function v({title:w,subtitle:p,navigationAction:M,primaryAction:A}){return e.createElement(e.Fragment,null,e.createElement(c.x7,{name:w}),e.createElement(E.Q,{navigationAction:M,primaryAction:A,title:w,subtitle:p}))}},59984:(L,m,t)=>{t.d(m,{nB:()=>R,bL:()=>C,hE:()=>O});var e=t(96540),n=t(97939),o=t(98016),g=t(75056),E=t(43418),c=t(91616),u=t(63292),f=t(6805),r=t(9605),a=t(5556),s=t.n(a),l=t(6442),y=t(40948);const T=t.p+"0cd5f8915b265d5b1856.png",h="limits-title",S="https://strapi.io/pricing-cloud",W="https://strapi.io/contact-sales";function O({children:v}){return e.createElement(n.o,{variant:"alpha",id:h},v)}O.propTypes={children:s().node.isRequired};function R({children:v}){return e.createElement(n.o,{variant:"omega"},v)}R.propTypes={children:s().node.isRequired};function I(){const{formatMessage:v}=(0,l.A)();return e.createElement(o.s,{gap:2,paddingTop:4},e.createElement(f.z,{variant:"default",isExternal:!0,href:S},v({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(f.z,{variant:"tertiary",isExternal:!0,href:W},v({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const P=y.Ay.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:v})=>`-${v.spaces[7]}`};
  margin-top: ${({theme:v})=>`-${v.spaces[7]}`};
  width: 360px;
`;function C({children:v,isOpen:w,onClose:p}){const{formatMessage:M}=(0,l.A)();return w?e.createElement(g.k,{labelledBy:h},e.createElement(E.c,null,e.createElement(o.s,{gap:2,paddingLeft:7,position:"relative"},e.createElement(o.s,{alignItems:"start",direction:"column",gap:2,width:"60%"},v,e.createElement(I,null)),e.createElement(o.s,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(P,{src:T,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(c.a,{display:"flex",position:"absolute",right:0,top:0},e.createElement(u.K,{icon:e.createElement(r.A,null),"aria-label":M({id:"global.close",defaultMessage:"Close"}),onClick:p})))))):null}C.defaultProps={isOpen:!1},C.propTypes={children:s().node.isRequired,isOpen:s().bool,onClose:s().func.isRequired}},11714:(L,m,t)=>{t.d(m,{Ae:()=>f,Al:()=>u,Cx:()=>c,Dp:()=>T,TE:()=>l,U:()=>E,fR:()=>o,h$:()=>r,hH:()=>s,hK:()=>y,oA:()=>a,p6:()=>n,sT:()=>g});var e=t(59675);const n="settings_review-workflows",o="Settings/Review_Workflows/RESET_WORKFLOW",g="Settings/Review_Workflows/SET_WORKFLOW",E="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",c="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",u="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",f="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",r="Settings/Review_Workflows/WORKFLOW_UPDATE",a={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},s=e._.colors.primary600,l={STAGE:"stage"},y="numberOfWorkflows",T="stagesPerWorkflow"},78101:(L,m,t)=>{t.d(m,{W:()=>o});var e=t(78320),n=t(75942);function o(g={}){const{get:E}=(0,e.ry)(),{id:c="",...u}=g,f={populate:"stages"},{data:r,isLoading:a,status:s,refetch:l}=(0,n.useQuery)(["review-workflows","workflows",c],async()=>(await E(`/admin/review-workflows/workflows/${c}`,{params:{...f,...u}})).data);let y=[];return c&&r?.data?y=[r.data]:Array.isArray(r?.data)&&(y=r.data),{meta:r?.meta??{},workflows:y,isLoading:a,status:s,refetch:l}}},1803:(L,m,t)=>{t.r(m),t.d(m,{default:()=>Z});var e=t(96540),n=t(78320),o=t(69733),g=t(71526),E=t(98016),c=t(10457),u=t(28244),f=t(47527),r=t(64154),a=t(15912),s=t(69782),l=t(97939),y=t(69688),T=t(88920),h=t(63292),S=t(68433),W=t(46748),O=t(34487),R=t(6442),I=t(75942),P=t(56347),C=t(40948),v=t(30420),w=t(20022),p=t(89974),M=t(59984),A=t(11714),Q=t(78101);const V=(0,C.Ay)(n.N_)`
  align-items: center;
  height: ${(0,n.a8)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:i})=>`${i.spaces[2]}}`};
  width: ${(0,n.a8)(32)};

  svg {
    height: ${(0,n.a8)(12)};
    width: ${(0,n.a8)(12)};

    path {
      fill: ${({theme:i})=>i.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:i})=>i.colors.neutral800};
      }
    }
  }
`;function X(){const{formatMessage:i}=(0,R.A)(),{push:j}=(0,P.W6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,v.m)(),{meta:x,workflows:U,isLoading:$,refetch:_}=(0,Q.W)(),[G,N]=e.useState(null),[ee,B]=e.useState(!1),{del:te}=(0,n.ry)(),{formatAPIError:ne}=(0,n.wq)(),k=(0,n.hN)(),{getFeature:se,isLoading:H}=(0,w.b)(),{trackUsage:z}=(0,n.z1)(),ae=(0,o.d4)(g.G),{allowedActions:{canCreate:Y,canDelete:le}}=(0,n.ec)(ae.settings["review-workflows"]),D=se("review-workflows"),{mutateAsync:oe,isLoading:re}=(0,I.useMutation)(async({workflowId:d,stages:K})=>{const{data:{data:F}}=await te(`/admin/review-workflows/workflows/${d}`,{data:K});return F},{onSuccess(){k({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=d=>[...J,...b].find(F=>F.uid===d).info.displayName,de=d=>{N(d)},ce=()=>{N(null)},me=async()=>{try{const d=await oe({workflowId:G});return await _(),N(null),d}catch(d){return k({type:"warning",message:ne(d)}),null}};return e.useEffect(()=>{!$&&!H&&D?.[A.hK]&&x?.workflowCount>parseInt(D[A.hK],10)&&B(!0)},[H,$,D,x?.workflowCount,x.workflowsTotal]),e.createElement(e.Fragment,null,e.createElement(p.Y9,{primaryAction:Y&&e.createElement(n.z9,{startIcon:e.createElement(S.A,null),size:"S",to:"/settings/review-workflows/create",onClick:d=>{D?.[A.hK]&&x?.workflowCount>=parseInt(D[A.hK],10)?(d.preventDefault(),B(!0)):z("willCreateWorkflow")}},i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:i({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:i({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),e.createElement(p.bL,null,$||q?e.createElement(E.s,{justifyContent:"center"},e.createElement(c.a,null,i({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):e.createElement(u.X,{colCount:3,footer:Y&&e.createElement(f.S,{icon:e.createElement(S.A,null),onClick:()=>{D?.[A.hK]&&x?.workflowCount>=parseInt(D[A.hK],10)?B(!0):(j("/settings/review-workflows/create"),z("willCreateWorkflow"))}},i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},e.createElement(r.d,null,e.createElement(a.Tr,null,e.createElement(s.Th,null,e.createElement(l.o,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),e.createElement(s.Th,null,e.createElement(l.o,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),e.createElement(s.Th,null,e.createElement(l.o,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),e.createElement(s.Th,null,e.createElement(y.s,null,i({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),e.createElement(T.N,null,U.map(d=>e.createElement(a.Tr,{...(0,n.qM)({fn(K){K.target.nodeName!=="BUTTON"&&j(`/settings/review-workflows/${d.id}`)}}),key:`workflow-${d.id}`},e.createElement(s.Td,{width:(0,n.a8)(250)},e.createElement(l.o,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},d.name)),e.createElement(s.Td,null,e.createElement(l.o,{textColor:"neutral800"},d.stages.length)),e.createElement(s.Td,null,e.createElement(l.o,{textColor:"neutral800"},(d?.contentTypes??[]).map(ie).join(", "))),e.createElement(s.Td,null,e.createElement(E.s,{alignItems:"center",justifyContent:"end"},e.createElement(V,{to:`/settings/review-workflows/${d.id}`,"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:d.name})},e.createElement(W.A,null)),U.length>1&&le&&e.createElement(h.K,{"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:e.createElement(O.A,null),noBorder:!0,onClick:()=>{de(d.id)}}))))))),e.createElement(n.TM,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:re,isOpen:!!G,onToggleDialog:ce,onConfirm:me}),e.createElement(M.bL,{isOpen:ee,onClose:()=>B(!1)},e.createElement(M.hE,null,i({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(M.nB,null,i({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function Z(){const i=(0,o.d4)(g.G);return e.createElement(n.kz,{permissions:i.settings["review-workflows"].main},e.createElement(X,null))}},47527:(L,m,t)=>{t.d(m,{S:()=>r});var e=t(74848),n=t(40948),o=t(91616),g=t(11744),E=t(98016),c=t(97939);const u=(0,n.Ay)(o.a)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:a})=>a.colors.primary600};
  }
`,f=(0,n.Ay)(o.a)`
  border-radius: 0 0 ${({theme:a})=>a.borderRadius} ${({theme:a})=>a.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,r=({children:a,icon:s,...l})=>(0,e.jsxs)("div",{children:[(0,e.jsx)(g.c,{}),(0,e.jsx)(f,{as:"button",background:"primary100",padding:5,...l,children:(0,e.jsxs)(E.s,{children:[(0,e.jsx)(u,{"aria-hidden":!0,background:"primary200",children:s}),(0,e.jsx)(o.a,{paddingLeft:3,children:(0,e.jsx)(c.o,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:a})})]})})]})},40009:(L,m,t)=>{t.d(m,{A:()=>o});var e=t(74848);const n=g=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...g,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),o=n}}]);
