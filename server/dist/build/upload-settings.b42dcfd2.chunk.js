"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[2714],{55105:(A,m,t)=>{t.r(m),t.d(m,{SettingsPage:()=>z,default:()=>$});var e=t(96540),i=t(71808),h=t(7562),p=t(90954),E=t(40121),y=t(63214),s=t(98016),v=t(91616),b=t(97939),L=t(96630),C=t(16473),O=t(4556),n=t(78320),o=t(26437),d=t(96275),l=t(2404),r=t.n(l),g=t(68154),D=t(6442),B=t(85022),c=t(47412);const N=a=>a;var W=t(41261),k=t(63560),K=t.n(k);const G={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},H=(a,x)=>(0,W.Ay)(a,u=>{switch(x.type){case"CANCEL_CHANGES":{u.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{u.isLoading=!1,u.initialData=x.data,u.modifiedData=x.data;break}case"ON_CHANGE":{K()(u,["modifiedData",...x.keys.split(".")],x.value);break}case"ON_SUBMIT":{u.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{u.initialData=a.modifiedData,u.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{u.isSubmiting=!1;break}default:return a}}),z=()=>{const{formatMessage:a}=(0,D.A)(),{lockApp:x,unlockApp:u}=(0,n.MA)(),F=(0,n.hN)(),{get:Q,put:J}=(0,n.ry)();(0,n.L4)();const[{initialData:X,isLoading:V,isSubmiting:Y,modifiedData:T},j]=(0,e.useReducer)(H,G,N),I=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const M=d.A.CancelToken.source(),w=async()=>{try{const{data:{data:R}}=await Q("/upload/settings",{cancelToken:M.token});j({type:"GET_DATA_SUCCEEDED",data:R})}catch(R){console.error(R)}};return I.current&&w(),()=>{M.cancel("Operation canceled by the user."),I.current=!1}},[]);const U=r()(X,T),Z=async f=>{if(f.preventDefault(),!U){x(),j({type:"ON_SUBMIT"});try{await J("/upload/settings",T),j({type:"SUBMIT_SUCCEEDED"}),F({type:"success",message:{id:"notification.form.success.fields"}})}catch(M){console.error(M),j({type:"ON_SUBMIT_ERROR"})}u()}},S=({target:{name:f,value:M}})=>{j({type:"ON_CHANGE",keys:f,value:M})};return e.createElement(i.g,{tabIndex:-1},e.createElement(g.m,{title:a({id:(0,c.gT)("page.title"),defaultMessage:"Settings - Media Libray"})}),e.createElement("form",{onSubmit:Z},e.createElement(h.Q,{title:a({id:(0,c.gT)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:e.createElement(p.$,{disabled:U,"data-testid":"save-button",loading:Y,type:"submit",startIcon:e.createElement(o.A,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,c.gT)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),e.createElement(E.s,null,V?e.createElement(n.Bl,null):e.createElement(y.P,null,e.createElement(s.s,{direction:"column",alignItems:"stretch",gap:12},e.createElement(v.a,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(s.s,{direction:"column",alignItems:"stretch",gap:4},e.createElement(s.s,null,e.createElement(b.o,{variant:"delta",as:"h2"},a({id:(0,c.gT)("settings.blockTitle"),defaultMessage:"Asset management"}))),e.createElement(L.x,{gap:6},e.createElement(C.E,{col:6,s:12},e.createElement(O.l,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:T.responsiveDimensions,hint:a({id:(0,c.gT)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,c.gT)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:f=>{S({target:{name:"responsiveDimensions",value:f.target.checked}})}})),e.createElement(C.E,{col:6,s:12},e.createElement(O.l,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:T.sizeOptimization,hint:a({id:(0,c.gT)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,c.gT)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:f=>{S({target:{name:"sizeOptimization",value:f.target.checked}})}})),e.createElement(C.E,{col:6,s:12},e.createElement(O.l,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:T.autoOrientation,hint:a({id:(0,c.gT)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,c.gT)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:f=>{S({target:{name:"autoOrientation",value:f.target.checked}})}}))))))))))},$=()=>e.createElement(n.kz,{permissions:B.Jj.settings},e.createElement(z,null))},40121:(A,m,t)=>{t.d(m,{s:()=>h});var e=t(74848),i=t(91616);const h=({children:p})=>(0,e.jsx)(i.a,{paddingLeft:10,paddingRight:10,children:p})},7562:(A,m,t)=>{t.d(m,{Q:()=>L});var e=t(74848),i=t(96540),h=t(40948);const p=n=>{const o=(0,i.useRef)(null),[d,l]=(0,i.useState)(!0),r=([g])=>{l(g.isIntersecting)};return(0,i.useEffect)(()=>{const g=o.current,D=new IntersectionObserver(r,n);return g&&D.observe(o.current),()=>{g&&D.disconnect()}},[o,n]),[o,d]};var E=t(10263);const y=(n,o)=>{const d=(0,E.c)(o);(0,i.useLayoutEffect)(()=>{const l=new ResizeObserver(d);return Array.isArray(n)?n.forEach(r=>{r.current&&l.observe(r.current)}):n.current&&l.observe(n.current),()=>{l.disconnect()}},[n,d])};var s=t(91616),v=t(98016),b=t(97939);const L=n=>{const o=(0,i.useRef)(null),[d,l]=(0,i.useState)(null),[r,g]=p({root:null,rootMargin:"0px",threshold:0});return y(r,()=>{r.current&&l(r.current.getBoundingClientRect())}),(0,i.useEffect)(()=>{o.current&&l(o.current.getBoundingClientRect())},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:d?.height},ref:r,children:g&&(0,e.jsx)(O,{ref:o,...n})}),!g&&(0,e.jsx)(O,{...n,sticky:!0,width:d?.width})]})};L.displayName="HeaderLayout";const C=(0,h.Ay)(s.a)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,O=i.forwardRef(({navigationAction:n,primaryAction:o,secondaryAction:d,subtitle:l,title:r,sticky:g,width:D,...B},c)=>{const P=typeof l=="string";return g?(0,e.jsx)(C,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:D,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(v.s,{justifyContent:"space-between",children:[(0,e.jsxs)(v.s,{children:[n&&(0,e.jsx)(s.a,{paddingRight:3,children:n}),(0,e.jsxs)(s.a,{children:[(0,e.jsx)(b.o,{variant:"beta",as:"h1",...B,children:r}),P?(0,e.jsx)(b.o,{variant:"pi",textColor:"neutral600",children:l}):l]}),d?(0,e.jsx)(s.a,{paddingLeft:4,children:d}):null]}),(0,e.jsx)(v.s,{children:o?(0,e.jsx)(s.a,{paddingLeft:2,children:o}):void 0})]})}):(0,e.jsxs)(s.a,{ref:c,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(s.a,{paddingBottom:2,children:n}):null,(0,e.jsxs)(v.s,{justifyContent:"space-between",children:[(0,e.jsxs)(v.s,{minWidth:0,children:[(0,e.jsx)(b.o,{as:"h1",variant:"alpha",...B,children:r}),d?(0,e.jsx)(s.a,{paddingLeft:4,children:d}):null]}),o]}),P?(0,e.jsx)(b.o,{variant:"epsilon",textColor:"neutral600",as:"p",children:l}):l]})})},63214:(A,m,t)=>{t.d(m,{P:()=>y});var e=t(74848),i=t(40948),h=t(91616);const p=(0,i.Ay)(h.a)`
  display: grid;
  grid-template-columns: ${({hasSideNav:s})=>s?"auto 1fr":"1fr"};
`,E=(0,i.Ay)(h.a)`
  overflow-x: hidden;
`,y=({sideNav:s,children:v})=>(0,e.jsxs)(p,{hasSideNav:!!s,children:[s,(0,e.jsx)(E,{paddingBottom:10,children:v})]})},71808:(A,m,t)=>{t.d(m,{g:()=>E});var e=t(74848),i=t(40948),h=t(91616);const p=(0,i.Ay)(h.a)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,E=({labelledBy:y="main-content-title",...s})=>(0,e.jsx)(p,{"aria-labelledby":y,as:"main",id:"main-content",tabIndex:-1,...s})}}]);
