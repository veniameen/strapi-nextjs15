"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[7003],{99498:(F,E,t)=>{t.d(E,{A:()=>x});var e=t(96540),s=t(83606);const x=()=>{const{changeLocale:A,localeNames:L,messages:d}=(0,e.useContext)(s.A);return{changeLocale:A,localeNames:L,messages:d}}},40025:(F,E,t)=>{t.r(E),t.d(E,{ProfilePage:()=>me});var e=t(96540),s=t(99532),v=t(71808),x=t(7562),A=t(40121),L=t(90954),d=t(91616),w=t(98016),r=t(78320),S=t(26437),j=t(7425),T=t(68154),a=t(6442),c=t(75942),f=t(99498),g=t(33878),p=t(26123),y=t(30524),W=t(69118),O=t(97939),U=t(96630),M=t(16473),z=t(89376),Q=t(29948),ae=t(5556),n=t.n(ae),J=t(40948);const k=(0,J.Ay)(y.k)`
  ::-ms-reveal {
    display: none;
  }
`,$=(0,J.Ay)(W.T)`
  svg {
    height: ${(0,r.a8)(16)};
    width: ${(0,r.a8)(16)};
    path {
      fill: ${({theme:o})=>o.colors.neutral600};
    }
  }
`,G=({errors:o,onChange:h,values:P})=>{const{formatMessage:u}=(0,a.A)(),[l,K]=(0,e.useState)(!1),[i,N]=(0,e.useState)(!1),[Y,Z]=(0,e.useState)(!1);return e.createElement(d.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.s,{direction:"column",alignItems:"stretch",gap:4},e.createElement(O.o,{variant:"delta",as:"h2"},u({id:"global.change-password",defaultMessage:"Change password"})),e.createElement(U.x,{gap:5},e.createElement(M.E,{s:12,col:6},e.createElement(y.k,{error:o.currentPassword?u({id:o.currentPassword,defaultMessage:o.currentPassword}):"",onChange:h,value:P.currentPassword,label:u({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:l?"text":"password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),K(B=>!B)},label:u(l?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},l?e.createElement(z.A,null):e.createElement(Q.A,null))}))),e.createElement(U.x,{gap:5},e.createElement(M.E,{s:12,col:6},e.createElement(k,{error:o.password?u({id:o.password,defaultMessage:o.password}):"",onChange:h,value:P.password,label:u({id:"global.password",defaultMessage:"Password"}),name:"password",type:i?"text":"password",autoComplete:"new-password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),N(B=>!B)},label:u(i?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},i?e.createElement(z.A,null):e.createElement(Q.A,null))})),e.createElement(M.E,{s:12,col:6},e.createElement(k,{error:o.confirmPassword?u({id:o.confirmPassword,defaultMessage:o.confirmPassword}):"",onChange:h,value:P.confirmPassword,label:u({id:"Auth.form.confirmPassword.label",defaultMessage:"Password confirmation"}),name:"confirmPassword",type:Y?"text":"password",autoComplete:"new-password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),Z(B=>!B)},label:u(Y?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},Y?e.createElement(z.A,null):e.createElement(Q.A,null))})))))};G.propTypes={errors:n().shape({currentPassword:n().string,password:n().string,confirmPassword:n().string}),onChange:n().func,values:n().shape({currentPassword:n().string,password:n().string,confirmPassword:n().string})},G.defaultProps={errors:{},onChange(){},values:{currentPassword:"",password:"",confirmPassword:""}};const se=G;var q=t(15074),_=t(62431),ne=t(55808),re=t.n(ne);const V=({onChange:o,values:h,localeNames:P,allApplicationThemes:u})=>{const{formatMessage:l}=(0,a.A)(),K=Object.keys(u).filter(i=>u[i]);return e.createElement(d.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.s,{direction:"column",alignItems:"stretch",gap:4},e.createElement(w.s,{direction:"column",alignItems:"stretch",gap:1},e.createElement(O.o,{variant:"delta",as:"h2"},l({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})),e.createElement(O.o,null,l({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:e.createElement(d.a,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales"},l({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"}))}))),e.createElement(U.x,{gap:5},e.createElement(M.E,{s:12,col:6},e.createElement(q.l,{label:l({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:l({id:"global.select",defaultMessage:"Select"}),hint:l({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{o({target:{name:"preferedLanguage",value:null}})},clearLabel:l({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:h.preferedLanguage,onChange:i=>{o({target:{name:"preferedLanguage",value:i}})}},Object.entries(P).map(([i,N])=>e.createElement(_.c,{value:i,key:i},N)))),e.createElement(M.E,{s:12,col:6},e.createElement(q.l,{label:l({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:l({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:l({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:h.currentTheme,onChange:i=>{o({target:{name:"currentTheme",value:i}})}},K.map(i=>e.createElement(_.c,{value:i,key:i},l({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:l({id:i,defaultMessage:re()(i)})}))))))))};V.propTypes={allApplicationThemes:n().object,onChange:n().func,values:n().shape({preferedLanguage:n().string,currentTheme:n().string}),localeNames:n().object},V.defaultProps={allApplicationThemes:{},onChange(){},values:{preferedLanguage:null,currentTheme:""},localeNames:{}};const oe=V,X=({errors:o,onChange:h,values:P})=>{const{formatMessage:u}=(0,a.A)();return e.createElement(d.a,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.s,{direction:"column",alignItems:"stretch",gap:4},e.createElement(O.o,{variant:"delta",as:"h2"},u({id:"global.profile",defaultMessage:"Profile"})),e.createElement(U.x,{gap:5},e.createElement(M.E,{s:12,col:6},e.createElement(r.ah,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:o.firstname,onChange:h,value:P.firstname,type:"text",name:"firstname",required:!0})),e.createElement(M.E,{s:12,col:6},e.createElement(r.ah,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:o.lastname,onChange:h,value:P.lastname,type:"text",name:"lastname"})),e.createElement(M.E,{s:12,col:6},e.createElement(r.ah,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:o.email,onChange:h,value:P.email,type:"email",name:"email",required:!0})),e.createElement(M.E,{s:12,col:6},e.createElement(r.ah,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:o.username,onChange:h,value:P.username,type:"text",name:"username"})))))};X.propTypes={errors:n().shape({firstname:n().string,lastname:n().string,username:n().string,email:n().string}),onChange:n().func,values:n().shape({firstname:n().string,lastname:n().string,username:n().string,email:n().string})},X.defaultProps={errors:{},onChange(){},values:{firstname:"",lastname:"",username:"",email:""}};const le=X;var ie=t(20627),de=t(84241);const ce=ie.Ik().shape(de.pK),me=()=>{const{changeLocale:o,localeNames:h}=(0,f.A)(),{setUserDisplayName:P}=(0,r.Xe)(),u=(0,c.useQueryClient)(),{formatMessage:l}=(0,a.A)(),{trackUsage:K}=(0,r.z1)(),i=(0,r.hN)(),{lockApp:N,unlockApp:Y}=(0,r.MA)(),{notifyStatus:Z}=(0,s.W)(),{currentTheme:R,themes:B,onChangeTheme:ue}=(0,g.fD)(),{get:ee,put:ge}=(0,r.ry)();(0,r.L4)();const{isLoading:pe,data:H}=(0,c.useQuery)("user",async()=>{const{data:m}=await ee("/admin/users/me");return m.data},{onSuccess(){Z(l({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"}))},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),{isLoading:fe,data:he}=(0,c.useQuery)(["providers","isSSOLocked"],async()=>{const{data:{data:m}}=await ee("/admin/providers/isSSOLocked");return m},{enabled:window.strapi.isEE&&window.strapi.features.isEnabled("sso"),onError(){i({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})}}),Ee=pe||fe,te=(0,c.useMutation)(async m=>{const{confirmPassword:C,currentTheme:I,...D}=m,{data:b}=await ge("/admin/users/me",D);return{...b.data,currentTheme:m.currentTheme}},{async onSuccess(m){await u.invalidateQueries("user");const{email:C,firstname:I,lastname:D,username:b,preferedLanguage:je}=m;r.j2.setUserInfo({email:C,firstname:I,lastname:D,username:b,preferedLanguage:je});const Te=m.username||(0,p.d)(m.firstname,m.lastname);P(Te),o(m.preferedLanguage),ue(m.currentTheme),K("didChangeMode",{newMode:m.currentTheme}),i({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})},onSettled(){Y()},refetchActive:!0}),{isLoading:ve}=te,we=async(m,{setErrors:C})=>{N();const I=m.username||null;te.mutate({...m,username:I},{onError(D){const b=D?.response?.data;return b?.data?C(b.data):i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};if(Ee)return e.createElement(v.g,{"aria-busy":"true"},e.createElement(T.m,{title:l({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(x.Q,{title:l({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),e.createElement(A.s,null,e.createElement(r.Bl,null)));const ye=he?.isSSOLocked??!1,{email:Me,firstname:Pe,lastname:xe,username:Ae,preferedLanguage:Le}=H,Se={email:Me,firstname:Pe,lastname:xe,username:Ae,preferedLanguage:Le,currentTheme:R};return e.createElement(v.g,{"aria-busy":ve},e.createElement(T.m,{title:l({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(j.l1,{onSubmit:we,initialValues:Se,validateOnChange:!1,validationSchema:ce,enableReinitialize:!0},({errors:m,values:C,handleChange:I,isSubmitting:D,dirty:b})=>e.createElement(r.lV,null,e.createElement(x.Q,{title:H.username||(0,p.d)(H.firstname,H.lastname),primaryAction:e.createElement(L.$,{startIcon:e.createElement(S.A,null),loading:D,type:"submit",disabled:!b},l({id:"global.save",defaultMessage:"Save"}))}),e.createElement(d.a,{paddingBottom:10},e.createElement(A.s,null,e.createElement(w.s,{direction:"column",alignItems:"stretch",gap:6},e.createElement(le,{errors:m,onChange:I,values:C}),!ye&&e.createElement(se,{errors:m,onChange:I,values:C}),e.createElement(oe,{allApplicationThemes:B,onChange:I,values:C,localeNames:h})))))))}},84241:(F,E,t)=>{t.d(E,{Gd:()=>r,pK:()=>A});var e=t(20627),s=t(78320);const v={firstname:e.Yj().trim().required(s.iW.required),lastname:e.Yj(),email:e.Yj().email(s.iW.email).lowercase().required(s.iW.required),username:e.Yj().nullable(),password:e.Yj().min(8,s.iW.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:e.Yj().min(8,s.iW.minLength).oneOf([e.KR("password"),null],"components.Input.error.password.noMatch").when("password",(S,j)=>S?j.required(s.iW.required):j)},A={...v,currentPassword:e.Yj().when(["password","confirmPassword"],(S,j,T)=>S||j?T.required(s.iW.required):T),preferedLanguage:e.Yj().nullable()},d={roles:e.YO().min(1,s.iW.required).required(s.iW.required)},r=e.Ik().shape({...v,isActive:e.lc(),...d})},40121:(F,E,t)=>{t.d(E,{s:()=>v});var e=t(74848),s=t(91616);const v=({children:x})=>(0,e.jsx)(s.a,{paddingLeft:10,paddingRight:10,children:x})},7562:(F,E,t)=>{t.d(E,{Q:()=>S});var e=t(74848),s=t(96540),v=t(40948);const x=a=>{const c=(0,s.useRef)(null),[f,g]=(0,s.useState)(!0),p=([y])=>{g(y.isIntersecting)};return(0,s.useEffect)(()=>{const y=c.current,W=new IntersectionObserver(p,a);return y&&W.observe(c.current),()=>{y&&W.disconnect()}},[c,a]),[c,f]};var A=t(10263);const L=(a,c)=>{const f=(0,A.c)(c);(0,s.useLayoutEffect)(()=>{const g=new ResizeObserver(f);return Array.isArray(a)?a.forEach(p=>{p.current&&g.observe(p.current)}):a.current&&g.observe(a.current),()=>{g.disconnect()}},[a,f])};var d=t(91616),w=t(98016),r=t(97939);const S=a=>{const c=(0,s.useRef)(null),[f,g]=(0,s.useState)(null),[p,y]=x({root:null,rootMargin:"0px",threshold:0});return L(p,()=>{p.current&&g(p.current.getBoundingClientRect())}),(0,s.useEffect)(()=>{c.current&&g(c.current.getBoundingClientRect())},[c]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:f?.height},ref:p,children:y&&(0,e.jsx)(T,{ref:c,...a})}),!y&&(0,e.jsx)(T,{...a,sticky:!0,width:f?.width})]})};S.displayName="HeaderLayout";const j=(0,v.Ay)(d.a)`
  width: ${({width:a})=>a?`${a/16}rem`:void 0};
  z-index: ${({theme:a})=>a.zIndices[1]};
`,T=s.forwardRef(({navigationAction:a,primaryAction:c,secondaryAction:f,subtitle:g,title:p,sticky:y,width:W,...O},U)=>{const M=typeof g=="string";return y?(0,e.jsx)(j,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:W,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(w.s,{justifyContent:"space-between",children:[(0,e.jsxs)(w.s,{children:[a&&(0,e.jsx)(d.a,{paddingRight:3,children:a}),(0,e.jsxs)(d.a,{children:[(0,e.jsx)(r.o,{variant:"beta",as:"h1",...O,children:p}),M?(0,e.jsx)(r.o,{variant:"pi",textColor:"neutral600",children:g}):g]}),f?(0,e.jsx)(d.a,{paddingLeft:4,children:f}):null]}),(0,e.jsx)(w.s,{children:c?(0,e.jsx)(d.a,{paddingLeft:2,children:c}):void 0})]})}):(0,e.jsxs)(d.a,{ref:U,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0,children:[a?(0,e.jsx)(d.a,{paddingBottom:2,children:a}):null,(0,e.jsxs)(w.s,{justifyContent:"space-between",children:[(0,e.jsxs)(w.s,{minWidth:0,children:[(0,e.jsx)(r.o,{as:"h1",variant:"alpha",...O,children:p}),f?(0,e.jsx)(d.a,{paddingLeft:4,children:f}):null]}),c]}),M?(0,e.jsx)(r.o,{variant:"epsilon",textColor:"neutral600",as:"p",children:g}):g]})})},71808:(F,E,t)=>{t.d(E,{g:()=>A});var e=t(74848),s=t(40948),v=t(91616);const x=(0,s.Ay)(v.a)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,A=({labelledBy:L="main-content-title",...d})=>(0,e.jsx)(x,{"aria-labelledby":L,as:"main",id:"main-content",tabIndex:-1,...d})}}]);
