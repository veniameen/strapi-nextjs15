"use strict";(self.webpackChunkserver=self.webpackChunkserver||[]).push([[5858],{46832:(y,E,e)=>{e.r(E),e.d(E,{InformationBoxEE:()=>I});var t=e(96540),r=e(79054),s=e(98016),m=e(97939),c=e(10457),o=e(78320),d=e(6442),l=e(75942),a=e(78852),g=e(20022),n=e(59984),i=e(11714),f=e(78101),v=e(30405);const w="strapi_stage";function I(){const{initialData:R,isCreatingEntry:W,layout:{uid:A,options:D},isSingleType:P,onChange:O}=(0,o.Cu)(),{put:u}=(0,o.ry)(),h=R?.[w]??null,B=D?.reviewWorkflows??!1,{formatMessage:p}=(0,d.A)(),{formatAPIError:G}=(0,o.wq)(),x=(0,o.hN)(),{getFeature:$}=(0,g.b)(),[k,L]=t.useState(!1),{meta:H,workflows:[K],isLoading:j}=(0,f.W)({filters:{contentTypes:A}}),{error:U,isLoading:Y,mutateAsync:b}=(0,l.useMutation)(async({entityId:T,stageId:C,uid:M})=>{const N=P?"single-types":"collection-types",{data:{data:F}}=await u(`/admin/content-manager/${N}/${M}/${T}/stage`,{data:{id:C}});return O({target:{name:w,value:F[w]}},!0),F},{onSuccess(){x({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),S=$("review-workflows"),z=U&&G(U)||null,Q=async({value:T})=>{try{S?.[i.hK]&&parseInt(S[i.hK],10)<H.workflowCount?L("workflow"):S?.[i.Dp]&&parseInt(S[i.Dp],10)<K.stages.length?L("stage"):await b({entityId:R.id,stageId:T,uid:A})}catch{}},{themeColorName:V}=h?.color?(0,v.w)(h?.color):{};return t.createElement(a.$.Root,null,t.createElement(a.$.Title,null),B&&!W&&t.createElement(r.Z,{error:z,name:w,id:w,value:h?.id,onChange:T=>Q({value:T}),label:p({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(s.s,{as:"span",height:2,background:h?.color,borderColor:V==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(s.s,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(m.o,{textColor:"neutral800",ellipsis:!0},h?.name),j||Y?t.createElement(c.a,{small:!0,style:{display:"flex"}}):null)},K?K.stages.map(({id:T,color:C,name:M})=>{const{themeColorName:N}=(0,v.w)(C);return t.createElement(r.eY,{startIcon:t.createElement(s.s,{height:2,background:C,borderColor:N==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:T,textValue:M},M)}):[]),t.createElement(a.$.Body,null),t.createElement(n.bL,{isOpen:k==="workflow",onClose:()=>L(!1)},t.createElement(n.hE,null,p({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(n.nB,null,p({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(n.bL,{isOpen:k==="stage",onClose:()=>L(!1)},t.createElement(n.hE,null,p({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(n.nB,null,p({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}},20022:(y,E,e)=>{e.d(E,{b:()=>m});var t=e(96540),r=e(78320),s=e(75942);function m({enabled:c}={enabled:!0}){const{get:o}=(0,r.ry)(),{data:d,isError:l,isLoading:a}=(0,s.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:i}}=await o("/admin/license-limit-information");return i},{enabled:c}),g=t.useMemo(()=>d??{},[d]),n=t.useCallback(i=>(g?.features??[]).find(v=>v.name===i)?.options??{},[g?.features]);return{license:g,getFeature:n,isError:l,isLoading:a}}},59984:(y,E,e)=>{e.d(E,{nB:()=>A,bL:()=>O,hE:()=>W});var t=e(96540),r=e(97939),s=e(98016),m=e(75056),c=e(43418),o=e(91616),d=e(63292),l=e(6805),a=e(9605),g=e(5556),n=e.n(g),i=e(6442),f=e(40948);const v=e.p+"0cd5f8915b265d5b1856.png",w="limits-title",I="https://strapi.io/pricing-cloud",R="https://strapi.io/contact-sales";function W({children:u}){return t.createElement(r.o,{variant:"alpha",id:w},u)}W.propTypes={children:n().node.isRequired};function A({children:u}){return t.createElement(r.o,{variant:"omega"},u)}A.propTypes={children:n().node.isRequired};function D(){const{formatMessage:u}=(0,i.A)();return t.createElement(s.s,{gap:2,paddingTop:4},t.createElement(l.z,{variant:"default",isExternal:!0,href:I},u({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(l.z,{variant:"tertiary",isExternal:!0,href:R},u({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const P=f.Ay.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:u})=>`-${u.spaces[7]}`};
  margin-top: ${({theme:u})=>`-${u.spaces[7]}`};
  width: 360px;
`;function O({children:u,isOpen:h,onClose:B}){const{formatMessage:p}=(0,i.A)();return h?t.createElement(m.k,{labelledBy:w},t.createElement(c.c,null,t.createElement(s.s,{gap:2,paddingLeft:7,position:"relative"},t.createElement(s.s,{alignItems:"start",direction:"column",gap:2,width:"60%"},u,t.createElement(D,null)),t.createElement(s.s,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(P,{src:v,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(o.a,{display:"flex",position:"absolute",right:0,top:0},t.createElement(d.K,{icon:t.createElement(a.A,null),"aria-label":p({id:"global.close",defaultMessage:"Close"}),onClick:B})))))):null}O.defaultProps={isOpen:!1},O.propTypes={children:n().node.isRequired,isOpen:n().bool,onClose:n().func.isRequired}},11714:(y,E,e)=>{e.d(E,{Ae:()=>l,Al:()=>d,Cx:()=>o,Dp:()=>v,TE:()=>i,U:()=>c,fR:()=>s,h$:()=>a,hH:()=>n,hK:()=>f,oA:()=>g,p6:()=>r,sT:()=>m});var t=e(59675);const r="settings_review-workflows",s="Settings/Review_Workflows/RESET_WORKFLOW",m="Settings/Review_Workflows/SET_WORKFLOW",c="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",o="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",d="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",l="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",a="Settings/Review_Workflows/WORKFLOW_UPDATE",g={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},n=t._.colors.primary600,i={STAGE:"stage"},f="numberOfWorkflows",v="stagesPerWorkflow"},78101:(y,E,e)=>{e.d(E,{W:()=>s});var t=e(78320),r=e(75942);function s(m={}){const{get:c}=(0,t.ry)(),{id:o="",...d}=m,l={populate:"stages"},{data:a,isLoading:g,status:n,refetch:i}=(0,r.useQuery)(["review-workflows","workflows",o],async()=>(await c(`/admin/review-workflows/workflows/${o}`,{params:{...l,...d}})).data);let f=[];return o&&a?.data?f=[a.data]:Array.isArray(a?.data)&&(f=a.data),{meta:a?.meta??{},workflows:f,isLoading:g,status:n,refetch:i}}},30405:(y,E,e)=>{e.d(E,{M:()=>m,w:()=>s});var t=e(59675),r=e(11714);function s(c){if(!c)return null;const d=Object.entries(t._.colors).filter(([,l])=>l.toUpperCase()===c.toUpperCase()).reduce((l,[a])=>(r.oA?.[a]&&(l=a),l),null);return d?{themeColorName:d,name:r.oA[d]}:null}function m(){return Object.entries(r.oA).map(([c,o])=>({hex:t._.colors[c].toUpperCase(),name:o}))}}}]);
